(this["webpackJsonpiipzy-client-web"]=this["webpackJsonpiipzy-client-web"]||[]).push([[0],{1:function(e,t,n){n(15);e.exports={reqAreYouServerUuid:"a962ed99-e788-49cd-aa67-b0a8317f1573",rspAreYouServerUuid:"7589c403-984c-4c8a-885b-48a65131d17b",reqDiscoveryUuid:"24e1c790-20b9-47e9-b4b7-77f15da4e191",rspDiscoveryUuid:"9c96377f-ee54-4d39-b4f0-fde43283ac73",port_server:"8001",port_sentinel_core:"8002",port_sentinel_web:"8008",port_sentinel_web_client_proxy:"8004",port_sentinel_web_server_proxy:"8088",port_sentinel_web_server:"8443",port_sentinel_updater:"8003",pingTarget:"iipzy.net",urlAbout:"/about",urlAddUser:"/addUser",urlAdministration:"/administration",urlBlank:"/blank",urlClients:"/clients",urlClientUpdate:"/clientUpdate",urlCloseSentinel:"/closeSentinel",urlDebug:"/debug",urlDevices:"/devices",urlDownload:"/download",urlEditUser:"/editUser",urlForgotPassword:"/forgotPassword",urlHome:"/home",urlIipzy:"/iipzy",urlLogin:"/login",urlLogLevel:"/logLevel",urlLogSend:"/logSend",urlNavigator:"/navigator",urlPingPlot:"/pingPlot",urlScheduler:"/scheduler",urlSentinelAdmin:"/sentinelAdmin",urlSentinelDiscovery:"/sentinelDiscovery",urlSentinelInUse:"/sentinelInUse",urlSentinelOnlineCheck:"/sentinelOnlineCheck",urlSentinels:"/sentinels",urlSettings:"/settings",urlStartup:"/startup",urlThroughputTest:"/throughputTest",urlUpdater:"/updater",ipcAAATest:"ipc_000",ipcAuthCredentialsUpdate:"ipc_001",ipcBloatLatencyStatusIperf3Down:"ipc_002",ipcBloatLatencyStatusIperf3DownFinal:"ipc_003",ipcBloatLatencyStatusIperf3Up:"ipc_004",ipcBloatLatencyStatusIperf3UpFinal:"ipc_005",ipcClearDials:"ipc_006",ipcClientLoginNeeded:"ipc_007",ipcClientName:"ipc_074",ipcClientShutdown:"ipc_008",ipcConnectionToken:"ipc_129",ipcConsoleLog:"ipc_009",ipcConsoleLogVerbose:"ipc_092",ipcDevicesReady:"ipc_075",ipcDeviceUpdated:"ipc_072",ipcDumpSentinelDeviceTable:"ipc_068",ipcExit:"ipc_010",ipcExiting:"ipc_011",ipcIperf3StatusDown:"ipc_012",ipcIperf3StatusUp:"ipc_013",ipcLinkTo:"ipc_014",ipcLoginStatus:"ipc_015",ipcLoginVerifyStatus:"ipc_157",ipcNominalLatencyStatus:"ipc_016",ipcNominalLatencyStatusFinal:"ipc_017",ipcNoop:"ipc_044",ipcPingPlotConvertDB:"ipc_056",ipcPingPlotData:"ipc_024",ipcPingPlotWindowButtonHome:"ipc_025",ipcPingPlotWindowButtonLeft:"ipc_026",ipcPingPlotWindowButtonLeftMarked:"ipc_027",ipcPingPlotWindowButtonRight:"ipc_028",ipcPingPlotWindowButtonRightMarked:"ipc_029",ipcPingPlotWindowButtonZoomChange:"ipc_030",ipcPingPlotWindowMount:"ipc_031",ipcPingPlotWindowButtonHomeEx:"ipc_114",ipcPingPlotWindowButtonLeftEx:"ipc_115",ipcPingPlotWindowButtonLeftMarkedEx:"ipc_116",ipcPingPlotWindowButtonRightEx:"ipc_117",ipcPingPlotWindowButtonRightMarkedEx:"ipc_118",ipcPingPlotWindowButtonZoomChangeEx:"ipc_119",ipcPingPlotWindowMountEx:"ipc_120",ipcQuit:"ipc_067",ipcRendererReady:"ipc_033",ipcSentinelDiscoveryTryingSentinelIPAddress:"ipc_018",ipcSentinelDiscovery:"ipc_019",ipcSentinelSendState:"ipc_020",ipcSentinelOnlineCheck:"ipc_021",ipcSentinelOnlineStatus:"ipc_022",ipcServerAddress:"ipc_064",ipcShowNavBar:"ipc_146",ipcTestingState:"ipc_036",ipcTickStatusIperf3Down:"ipc_037",ipcThroughputTestFailedToGetServer:"ipc_038",ipcThrouputTestStatus:"ipc_087",ipcThroughputTestWindowButtonLeft:"ipc_089",ipcThroughputTestWindowButtonNewest:"ipc_088",ipcThroughputTestWindowButtonOldest:"ipc_091",ipcThroughputTestWindowButtonRight:"ipc_090",ipcThroughputTestWindowMount:"ipc_039",ipcThroughputTestWindowCancel:"ipc_175",ipcThroughputTestWindowStart:"ipc_174",ipcThroughputTestWindowStartStop:"ipc_040",ipcTickStatusIperf3Up:"ipc_041",ipcTickStatusNominalLatency:"ipc_042",ipcTimeOfTest:"ipc_043",ipcUserAddVerified:"ipc_127",ipcZZZNext:"ipc_176",configFilename:"iipzy",crashFilename:"iipzy-crash.txt",loginStatusLoggedOut:0,loginStatusLoggedIn:1,loginStatusLoginFailed:2,loginStatusVerified:3,loginStatusVerifyFailed:4,loginStatusNoServerAddress:5,sentinelStatusOnline:0,sentinelStatusOffline:1,sentinelStatusInUse:2,sentinelStatusNoAddress:3,sentinelStatusUnknown:4,sentinelStatusOnlineLoggedOut:5,pevLoginStatus:"pev_1001",pevLoginNeeded:"pev_1002",pevZZZNext:"pev_1003",httpCustomHeader_XAuthToken:"x-auth-token",httpCustomHeader_XClientToken:"x-client-token",httpCustomHeader_XConnToken:"x-conn-token",httpCustomHeader_XTimestamp:"x-timestamp",httpCustomHeader_XWebClient:"x-web-client",httpStatusOk:200,httpStatusCreated:201,httpStatusAccepted:202,httpStatusNoContent:204,httpStatusMultiStatus:207,httpStatusFound:302,httpStatusBadRequest:400,httpStatusUnauthorized:401,httpStatusForbidden:403,httpStatusNotFound:404,httpStatusConflict:409,httpStatusGone:410,httpStatusUnprocessableEntity:422,httpStatusInternalError:500,httpStatusNotImplemented:501,httpStatusConnRefused:900,httpStatusConnAborted:901,httpStatusConnReset:902,httpStatusSentinelInUse:903,httpStatusException:999,statusOk:0,statusAlreadyExists:10001,statusDoesNotExist:10002,statusInvalidVerificationCode:10003,statusGeneralSqlFailure:10004,statusException:10005,statusInvalidUserName:10006,statusInvalidPasswordResetCode:10007,statusCannotAllocateIperf3Server:10008,statusDailyIperf3LimitReached:10009,statusInvalidUpdateType:10010,statusUpdateInProgress:10011,statusRouteError:10012,statusMissingClientToken:10013,statusInvalidClientToken:10014,statusMissingAuthToken:10015,statusInvalidAuthToken:10016,statusMissingParam:10017,statusInvalidParam:10018,statusInvalidCredentials:10019,statusMissingConnectionToken:10020,statusInvalidConnectionToken:10021,statusAdminPriviledgeRequired:10022,statusInvalidClientType:10023,statusIperf3ServerBusy:10024,statusHttpError:10025,statusInvalidThirdPartyApi:10026,statusSentinelInUse:10027,statusAdminInProgress:10028,statusInvalidDownloadClient:10029,statusUserNotInWhiteList:10030,statusIperf3ServerFailed:10031,pingMarkNormal:0,pingMarkDropped:1,pingMarkSaved:2,objectType_null:"",objectType_clientInstance:"clientInstance",objectType_networkDevice:"networkDevice",objectType_server:"server",eventClass_null:"",eventClass_clientAdded:"clientAdded",eventClass_clientAddressChanged:"clientAddressChanged",eventClass_clientOnLineStatus:"clientOnLineStatus",eventClass_clientLoginStatus:"clientLoginStatus",eventClass_cpuusage:"cpuusage",eventClass_crash:"crash",eventClass_networkDeviceAdded:"networkDeviceAdded",eventClass_networkDeviceDeleted:"networkDeviceDeleted",eventClass_networkDeviceIPAddressChanged:"networkDeviceIPAddressChanged",eventClass_networkDeviceStatus:"networkDeviceStatus",eventClass_pingFail:"pingFail",eventId_null:"",eventActive_inactive:0,eventActive_active:1,eventActive_activeAutoInactive:2,alertTarget_null:0,alertTarget_email:1,alertTarget_sms:2,adminCmd_admin:"admin",adminCmd_getLogLevel:"get-log-level",adminCmd_setLogLevel:"set-log-level",adminCmd_sendLogs:"send-logs",adminCmd_sentinel_none:"none",adminCmd_sentinel_reboot:"reboot",adminCmd_sentinel_resetNetworkDevicesDatabase:"reset-network-devices-database",adminCmd_sentinel_restartSentinel:"restart-sentinel",adminCmd_sentinel_restartSentinelAdmin:"restart-sentinel-admin",adminCmd_sentinel_restartSentinelWeb:"restart-sentinel-web",adminCmd_sentinel_restartUpdater:"restart-updater",adminCmd_sentinel_sendLogs:"send-logs",adminCmd_sentinel_setLogLevelDetailed:"set-log-level-detailed",adminCmd_sentinel_setLogLevelNormal:"set-log-level-normal",clientType_null:"null",clientType_appliance:"appliance",clientType_pc:"pc",clientType_web:"web",clientMode_null:"null",clientMode_pcOnly:"pc-only",clientMode_sentinel:"sentinel",thirdPartyApiName_null:"null",thirdPartyApiName_email:"email",thirdPartyApiName_ipApi:"ipApi",thirdPartyApiName_ipGeolocation:"ipGeolocation",thirdPartyApiName_sms:"sms",headBuzzardUserId:1,endOfFile:0}},170:function(e,t,n){e.exports=n(332)},177:function(e,t,n){},182:function(e,t,n){},206:function(e,t){},208:function(e,t){},232:function(e,t){},234:function(e,t){},263:function(e,t){},264:function(e,t){},332:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),r=n(4),i=n(0),s=n.n(i),l=n(46),u=n.n(l),c=n(14),d=(n(176),n(1)),p=n.n(d),m=(n(177),n(5)),h=n(6),g=n(9),f=n(7),b=n(8),v=n(44);var k={send:function(e,t){console.log("---eventManager.send: channel = "+e);var n=new CustomEvent(e,{detail:{data:t||{}}});document.getElementById("root").dispatchEvent(n)},on:function(e,t){document.getElementById("root").addEventListener(e,(function(n){t(e,n.detail.data)}),!1)}},w=null,y=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleClick=function(e){console.log("==================NavBar.handleClick: url = "+e)},console.log("NavBar.constructor"),a.state={count:0},w=Object(g.a)(a),a}return Object(h.a)(n,[{key:"doRender",value:function(){console.log("NavBar.doRender");var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){var e=this,t=n.isAdmin,a=n.loggedIn,o=n.navbarName;return console.log("NavBar.render: = "+o),s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},"home"===o&&s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},s.a.createElement("div",{className:"navbar-nav"},s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlIipzy)},to:p.a.urlIipzy},"iipzy"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlSentinels)},to:p.a.urlSentinels},"Sentinel"),!a&&s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlLogin)},to:p.a.urlLogin},"Log In"),a&&s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlLogin)},to:p.a.urlLogin},"Log Out"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlEditUser)},to:p.a.urlEditUser},"Edit User"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlForgotPassword)},to:p.a.urlForgotPassword},"Forgot Password"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlAddUser)},to:p.a.urlAddUser},"Register"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlAbout)},to:p.a.urlAbout},"About"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlDownload)},to:p.a.urlDownload},"Download"),t?s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlAdministration)},to:p.a.urlAdministration},"Administration"):null)),"admin"===o&&s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},s.a.createElement("div",{className:"navbar-nav"},s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlClients)},to:p.a.urlClients},"Clients"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlSentinelAdmin)},to:p.a.urlSentinelAdmin},"Admin"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlUpdater)},to:p.a.urlUpdater},"Update"),s.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlHome)},to:p.a.urlHome},"Home"))))}}]),n}(s.a.Component);y.isAdmin=!1,y.loggedIn=!1,y.navbarName="home";k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.isAdmin,a=t.loginStatus;y.isAdmin=n,y.loggedIn=a===p.a.loginStatusLoggedIn,null!=w&&w.doRender()})),k.on(p.a.ipcShowNavBar,(function(e,t){console.log("NavBar.handleShowNavBar: "+t),y.navbarName=t,null!=w&&w.doRender()}));var E=y,C=(n(182),n(168)),S=n(164),_=n.n(S),P=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("CloseButton.constructor"),a.state={linkCount:0},a}return Object(h.a)(n,[{key:"handleClick",value:function(e){console.log("CloseButton.handleClick"),this.props.onClick(e)}},{key:"render",value:function(){var e=this;return console.log("IipzyWindow.render"),s.a.createElement("div",null,s.a.createElement(_.a,{onClick:function(t){return e.handleClick(t)},type:"submit",style:{position:"absolute",top:"0px",right:"0px",border:"none",background:"none",outline:"none"}},s.a.createElement(C.a,{style:{height:30,width:30}})))}}]),n}(s.a.Component),x=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),Object(g.a)(a),a}return Object(h.a)(n,[{key:"getInfoMessage",value:function(){return this.props.getInfoMessage()}},{key:"handleSubmitClick",value:function(e){console.log("...Popup handleSubmitClick"),this.props.closePopup()}},{key:"render",value:function(){var e=this;return console.log("InfoPopup render"),s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{className:"popup"},s.a.createElement("div",{className:"popup_inner"},s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},this.props.title)),s.a.createElement("div",{style:{marginLeft:30,textAlign:"left"}},s.a.createElement("p",null,s.a.createElement("br",null),this.getInfoMessage())),s.a.createElement(P,{onClick:function(t){return e.handleSubmitClick(t)}}))))}}]),n}(s.a.Component),A=null,N=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("Navigator.constructor"),a.state={linkCount:0},A=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("Navigator.componentDidMount"),A=this}},{key:"componentWillUnmount",value:function(){console.log("Navigator.componentWillUnmount"),A=null}},{key:"handleLinkChange",value:function(){n.linkChange=!0,n.linkCount++,console.log("Navigator: handleLinkChange: "+n.link),this.setState({linkCount:n.linkCount})}},{key:"render",value:function(){var e=n.linkChange;n.linkChange=!1;var t=n.link;return console.log("Navigator.render: "+t+", linkChange = "+e),s.a.createElement("div",null,e&&s.a.createElement(v.d,null,s.a.createElement(v.a,{to:t})))}}]),n}(s.a.Component);N.link="",N.linkCount=0,N.linkChange=!1,k.on(p.a.ipcSentinelOnlineStatus,(function(e,t){})),k.on(p.a.ipcLinkTo,(function(e,t){console.log("navigator: "+t),N.link=t,A&&A.handleLinkChange()}));var T=N,O=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("AboutWindow.constructor"),a.state={count:0},Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AboutWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("AboutWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){console.log("AboutWindow.render");p.a.urlDownload;return s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"About iipzy"),s.a.createElement("p",null,"iipzy monitors your internet connection for reliability and speed."),s.a.createElement("p",null,"An iipzy device on your local network talks to the iipzy service in the cloud. The iipzy device is a Raspberry Pi computer running linux and iipzy software. Click ",s.a.createElement("b",null,"Download")," above for how to set up a Raspberry Pi. The iipzy device is known as ",s.a.createElement("b",null,"Sentinel"),"."),s.a.createElement("p",null,"To watch your network connection, Sentinel sends a heartbeat to the iipzy service every 20 seconds. If the service fails to receive a heartbeat for one minute, it assumes your internet connection is down. You are notified by a text message and email of this. When a heartbeat is again received, you are notified that the connection is up."),s.a.createElement("p",null,"To measure network latency, Sentinel sends a ping to an internet server every 5 seconds. You can view the ping latency on a graph so that you can see latency variations over time. Ping history is kept for 30 days. iipzy notifies you by email if one or more pings are dropped."),s.a.createElement("p",null,"To measure network throughput, Sentinel runs a speed test once a day, at about 1 am. You can also run the speed test on demand. You can view the history of the speed tests to see if your throughput is changing."),s.a.createElement("p",null,"Additionally, Sentinel keeps track of devices on your network. You can view info about the devices, such as ip address, name, and capabilities. iipzy notifies you via email if a new device appears on your network or if a device hasn't been seen for 30 days. You can optionally monitor a particular device so that you are notified by email if it goes offline or comes online.")))}}]),n}(s.a.Component);function U(e,t,n){console.log(n+" ["+t+"] "+e)}var I=n(24),L=n.n(I),j=n(165),W=n.n(j),R=L.a.create({httpsAgent:new W.a.Agent({keepAlive:!0}),validateStatus:function(e){return!0}});function M(e,t){console.log("(Exception) "+e+": "+t+", code = "+t.code);var n=p.a.httpStatusException;switch(t.code){case"ECONNREFUSED":n=p.a.httpStatusConnRefused;break;case"ECONNABORTED":n=p.a.httpStatusConnAborted;break;case"ECONNRESET":n=p.a.httpStatusConnReset;break;default:n=p.a.httpStatusConnRefused}return{status:n}}function D(){return(D=Object(r.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.delete(t,V(n));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",M("delete",e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function B(){return(B=Object(r.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--------------_get: url "+t),e.prev=1,e.next=4,R.get(t,V(n));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log("(Exception)--------------_get: ex "+e.t0.code),e.abrupt("return",M("get",e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function F(){return(F=Object(r.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--------------_post: url "+t),e.prev=1,e.next=4,R.post(t,n,V(a));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log("(Exception)--------------_post: ex "+e.t0.code),e.abrupt("return",M("post",e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function z(){return(z=Object(r.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.put(t,n,V(a));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",M("put",e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function V(e){var t=e||{};return t.headers={},t.headers[p.a.httpCustomHeader_XTimestamp]=Date.now(),t.headers[p.a.httpCustomHeader_XWebClient]=1,L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken]&&(t.headers[p.a.httpCustomHeader_XAuthToken]=L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken]),L.a.defaults.headers.common[p.a.httpCustomHeader_XClientToken]&&(t.headers[p.a.httpCustomHeader_XClientToken]=L.a.defaults.headers.common[p.a.httpCustomHeader_XClientToken]),L.a.defaults.headers.common[p.a.httpCustomHeader_XConnToken]&&(t.headers[p.a.httpCustomHeader_XConnToken]=L.a.defaults.headers.common[p.a.httpCustomHeader_XConnToken]),t}var H={delete:function(e,t){return D.apply(this,arguments)},get:function(e,t){return B.apply(this,arguments)},post:function(e,t,n){return F.apply(this,arguments)},put:function(e,t,n){return z.apply(this,arguments)},logAuthToken:function(){console.log("authToken: "+L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken])},setAuthTokenHeader:function(e){console.log("setAuthTokenHeader = "+e),L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken]=e},setBaseURL:function(e){L.a.defaults.baseURL="http://"+e+"/",console.log("setBaseURL = "+L.a.defaults.baseURL)},setClientTokenHeader:function(e){console.log("setClientTokenHeader = "+e),L.a.defaults.headers.common[p.a.httpCustomHeader_XClientToken]=e},setConnTokenHeader:function(e){console.log("setConnTokenHeader = "+e),L.a.defaults.headers.common[p.a.httpCustomHeader_XConnToken]=e}},q="address not set";function G(){return(G=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U("users.init","clts","info"),q=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("addUser","user","info"),e.next=3,H.post("https://"+q+"/api/user",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("deleteUser","user","info"),e.next=3,H.delete("https://"+q+"/api/user");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("getUser","user","info"),e.next=3,H.get("https://"+q+"/api/user");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("newPassword","user","info"),e.next=3,H.post("https://"+q+"/api/user/newpassword",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("sendCode","user","info"),e.next=3,H.post("https://"+q+"/api/user/sendcode",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("updateUser","user","info"),e.next=3,H.put("https://"+q+"/api/user/user",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("verifyUser","user","info"),e.next=3,H.put("https://"+q+"/api/user/verify",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee={init:function(e){return G.apply(this,arguments)},final:function(){},addUser:function(e){return X.apply(this,arguments)},deleteUser:function(e){return J.apply(this,arguments)},getUser:function(){return Y.apply(this,arguments)},newPassword:function(e){return Z.apply(this,arguments)},sendPasswordResetCode:function(e){return $.apply(this,arguments)},updateUser:function(e){return K.apply(this,arguments)},verifyUser:function(e){return Q.apply(this,arguments)}},te=n(67),ne=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("SpinnerPopup.constructor"),Object(g.a)(a),a.state={count:0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("SpinnerPopup.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){return console.log("SpinnerPopup render"),s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{className:"popup_spinner"},s.a.createElement("div",{className:"popup_spinner_inner",alignItems:"center"},s.a.createElement("div",null,s.a.createElement(te.a,{animation:"border",role:"status"},s.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),n}(s.a.Component),ae=n(36),oe=n(346),re=function(e){var t=e.type,n=e.name,a=e.label,o=e.value,r=e.error,i=e.autofocus,l=e.disabled,u=e.onChange,c=e.porportionalWidth?"85%":"480px";return s.a.createElement("div",{className:"form-group",style:{width:c,marginLeft:45}},s.a.createElement("label",{htmlFor:n},a),s.a.createElement("input",{autoFocus:i,disabled:l,value:o||"",onChange:u,id:n,name:n,type:t,className:"form-control"}),r&&s.a.createElement("div",{className:"alert alert-danger"},r))},ie=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={code:""},console.log("ValidationPopup.constructor"),a}return Object(h.a)(n,[{key:"getCode",value:function(){return this.state.code}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("ValidationPopup.handleChange: name = "+t+", value = "+this.state[t]),this.setState(Object(ae.a)({},t,n))}},{key:"handleSubmitClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ValidationPopup.handleSubmitClick"),console.log("code="+this.state.code),this.props.closePopup(),this.props.onSubmit(this.state.code);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCancelClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ValidationPopup.handleCancelClick"),this.props.closePopup(),this.props.onSubmit("000000");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isValidInput",value:function(){return!0}},{key:"render",value:function(){var e=this;return console.log("ValidationPopup.render"),s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{className:"popup"},s.a.createElement("div",{className:"popup_inner"},s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Enter Validation Code")),s.a.createElement(re,{type:"text",autofocus:!0,disabled:!1,name:"code",value:this.getCode(),label:"Code",onChange:function(t){return e.handleChange(t)},error:"",porportionalWidth:!0}),s.a.createElement("h1",null,this.props.text),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.isValidInput(),style:{width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleSubmitClick(t)}},"Submit")),s.a.createElement(P,{onClick:function(t){return e.handleCancelClick(t)}}))))}}]),n}(s.a.Component),se=n(70),le=n(20),ue=n.n(le),ce=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("UserForm.constructor"),a.state={errors:{},count:0},a.data={userName:null,emailAddress:null,mobilePhoneNo:null,password:null,password2:null},Object(g.a)(a),a.schema={userName:ue.a.string().required().label("User Name").min(5).max(50),emailAddress:ue.a.string().required().label("Email Address").email(),mobilePhoneNo:ue.a.string().required().label("Mobile Phone Number").regex(/^\d{3}-\d{3}-\d{4}$/).error((function(e){return{message:"Phone number must be of the form 123-456-7890"}})),password:ue.a.string().required().label("Password").min(5).max(50),password2:ue.a.string().required().label("Password Again").min(5).max(50)},a}return Object(h.a)(n,[{key:"validateProperty",value:function(e,t){console.log("UserForm.validateProperty: name="+e+", value = "+t);var n=Object(ae.a)({},e,t),a=Object(ae.a)({},e,this.schema[e]),o=ue.a.validate(n,a).error;return console.log("UserForm.validateProperty - had error = "+o),o?o.details[0].message:null}},{key:"validate",value:function(){var e=ue.a.validate(this.data,this.schema,{abortEarly:!1}).error;if(!e)return null;console.log("UserForm.validate - had error");var t,n={},a=Object(se.a)(e.details);try{for(a.s();!(t=a.n()).done;){var o=t.value;n[o.path[0]]=o.message}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"componentDidMount",value:function(){console.log("UserForm.componentDidMount"),this.data=this.props.getUserData();var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("UserForm.componentWillUnmount"),this.props.setUserData(this.data),null}},{key:"isValidUserName",value:function(){return null!=this.data.userName&&this.data.userName.length>5}},{key:"isValidMobilePhoneNo",value:function(){return null!=this.data.mobilePhoneNo&&this.data.mobilePhoneNo.length>9}},{key:"isValidEmailAddress",value:function(){return null!=this.data.emailAddress&&this.data.emailAddress.length>5}},{key:"isValidPassword",value:function(){return null!=this.data.password&&this.data.password.length>5}},{key:"getButton1Label",value:function(){return this.props.button1Label}},{key:"getButton2Label",value:function(){return this.props.button2Label}},{key:"isValidInput",value:function(){return this.props.getButtonsEnabled()&&this.isValidUserName()&&this.isValidMobilePhoneNo()&&this.isValidEmailAddress()&&this.isValidPassword()&&this.data.password===this.data.password2}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("UserForm.handleChange: name = "+t+", value = "+this.data[t]);var a=this.state.errors,o=this.validateProperty(t,n);o?a[t]=o:delete a[t];var r=this.data;r[t]=n,this.setState({data:r,errors:a})}},{key:"handlePassword2Change",value:function(e){var t=e.target.name,n=e.target.value;if(console.log("UserForm.handlePassword2Change: name="+t+", value="+this.data[t]),this.data.password!==n){var a=this.state.errors;a[t]="passwords don't match";var o=this.data;return o[t]=n,void this.setState({data:o,errors:a})}return this.handleChange(e)}},{key:"handleButtonClick",value:function(e){console.log("UserForm.handleButtonClick"),console.log("userName="+this.data.userName),console.log("mobilePhoneNo="+this.data.mobilePhoneNo),console.log("emailAddress="+this.data.emailAddress),e.preventDefault();var t=this.validate();t&&console.log("UserForm.handleButtonClick: errors = "+Object.values(t)),this.setState({errors:t||{}}),t||(this.props.setButtonsEnabled(!1),this.props.setFieldsEnabled(!1),this.props.onSubmit(this.data))}},{key:"handleButton2Click",value:function(e){this.props.setButtonsEnabled(!1),this.props.setFieldsEnabled(!1),this.props.onSubmit2(this.data)}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=this.state.errors,l=this.data;this.handleChange;return s.a.createElement(re,{type:n,name:e,label:t,value:l[e],error:i[e],autofocus:a,disabled:o,onChange:r})}},{key:"render",value:function(){var e=this;console.log("UserForm.render");var t=this.props.getButtonsEnabled(),n=this.props.getFieldsEnabled(),a=this.props.onSubmit2?20:0,o=s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},this.props.title)),s.a.createElement("form",null,this.renderInput("userName","User Name","text",!0,this.props.userNameDisabled||!n,(function(t){return e.handleChange(t)})),this.renderInput("emailAddress","Email Address","text",!1,!this.isValidUserName()||!n,(function(t){return e.handleChange(t)})),this.renderInput("mobilePhoneNo","Mobile Phone Number","text",!1,!this.isValidEmailAddress()||!n,(function(t){return e.handleChange(t)})),this.renderInput("password","Password","password",!1,!this.isValidMobilePhoneNo()||!n,(function(t){return e.handleChange(t)})),this.renderInput("password2","Password Again","password",!1,!this.isValidPassword()||!n,(function(t){return e.handlePassword2Change(t)})),s.a.createElement("div",null,"\xa0"),s.a.createElement("div",{style:{marginLeft:"45px"}},s.a.createElement("table",{align:"left"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{style:{textAlign:"center",marginRight:a}},s.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.isValidInput(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleButtonClick(t)}},this.getButton1Label()))),this.props.onSubmit2&&s.a.createElement("td",null,s.a.createElement("div",{style:{textAlign:"center",marginLeft:20}},s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!t,style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleButton2Click(t)}},this.getButton2Label())))))))));return console.log("<<<UserForm.render"),o}}]),n}(s.a.Component),de=null,pe=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("AddUserWindow.constructor"),a.state={count:0},de=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AddUserWindow.componentDidMount"),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("AddUserWindow.componentWillUnmount"),de=null}},{key:"componentWillReceiveProps",value:function(){console.log("AddUserWindow.componentWillReceiveProps")}},{key:"shouldComponentUpdate",value:function(e,t){return console.log("AddUserWindow.shouldComponentUpdate"),!0}},{key:"getUserData",value:function(){return{userName:n.userName,emailAddress:n.emailAddress,mobilePhoneNo:n.mobilePhoneNo,password:n.password,password2:n.password2}}},{key:"setUserData",value:function(e){n.userName=e.userName,n.emailAddress=e.emailAddress,n.mobilePhoneNo=e.mobilePhoneNo,n.password=e.password,n.password2=e.password2}},{key:"handleAddClick",value:function(e){console.log("AddUserWindow.handleAddClick"),console.log("  userName="+e.userName),console.log("  mobilePhoneNo="+e.mobilePhoneNo),console.log("  emailAddress="+e.emailAddress),n.userName=e.userName,n.mobilePhoneNo=e.mobilePhoneNo,n.emailAddress=e.emailAddress,n.password=e.password,n.password2=e.password,function(e){me.apply(this,arguments)}(e)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleInfoPopupClick",value:function(){console.log("AddUserWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,n.buttonsEnabled=!n.showValidationPopup,n.isVerified&&(k.send(p.a.ipcUserAddVerified,{userName:n.userName}),n.isVerified=!1),this.doRender()}},{key:"handleVerifyClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("AddUserWindow.handleVerifyClick, code"+t),"000000"!==t&&he({userId:n.userId,verificationCode:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"hideValidationCodePopup",value:function(){n.showValidationPopup=!1,n.buttonsEnabled=!0,this.doRender()}},{key:"getButtonsEnabled",value:function(){return console.log("addUserWindow.getButtonsEnabled: "+n.buttonsEnabled),n.buttonsEnabled}},{key:"setButtonsEnabled",value:function(e){n.buttonsEnabled=e,console.log("AddUserWindow.setButtonsEnabled: "+n.fieldsEnabled)}},{key:"getFieldsEnabled",value:function(){return console.log("addUserWindow.getFieldsEnabled: "+n.fieldsEnabled),n.fieldsEnabled}},{key:"setFieldsEnabled",value:function(e){n.fieldsEnabled=e,console.log("AddUserWindow.setFieldsEnabled: "+n.fieldsEnabled)}},{key:"doRender",value:function(){console.log("AddUserWindow.doRender"),this.setState({count:this.state.count+1})}},{key:"render",value:function(){var e=this;console.log("AddUserWindow.render");var t=n.showInfoPopup,a=n.showSpinner,o=n.showValidationPopup;console.log("AddUserWindow.render: showInfoPopup = "+t),console.log("AddUserWindow.render: showSpinner = "+a),console.log("AddUserWindow.render: showValidationPopup = "+o);var r=s.a.createElement("div",null,o&&s.a.createElement(ie,{onSubmit:function(t){return e.handleVerifyClick(t)},closePopup:this.hideValidationCodePopup.bind(this)}),t&&s.a.createElement(x,{title:"Register User",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),a&&s.a.createElement(ne,null),s.a.createElement(ce,{title:"Register User @ iipzy.com",getUserData:this.getUserData,setUserData:this.setUserData,getButtonsEnabled:this.getButtonsEnabled,setButtonsEnabled:this.setButtonsEnabled,getFieldsEnabled:this.getFieldsEnabled,setFieldsEnabled:this.setFieldsEnabled,userNameDisabled:!1,button1Label:"Register",onSubmit:function(t){return e.handleAddClick(t)}}));return console.log("<<<AddUserWindow.render"),r}}]),n}(ce);function me(){return(me=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("AddUserWindow.addUser"),pe.showSpinner=!0,de&&de.doRender(),e.next=5,ee.addUser(t);case 5:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=17;break}return console.log("addUserWindow.handleUserAddResponse: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),pe.infoMessage=a.__hadError__.errorMessage,pe.showInfoPopup=!0,pe.showSpinner=!1,pe.buttonsEnabled=!1,pe.fieldsEnabled=!0,de&&de.doRender(),e.abrupt("return");case 17:pe.userId=a.userId,console.log("AddUserWindow.addUser: userId = "+pe.userId),pe.showSpinner=!1,pe.showValidationPopup=!0,pe.buttonsEnabled=!1,pe.fieldsEnabled=!0,de&&de.doRender();case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.showSpinner=!0,de&&de.doRender(),e.next=4,ee.verifyUser(t);case 4:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=16;break}return console.log("AddUserWindow.handleUserVerifyResponse: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),pe.infoMessage=a.__hadError__.errorMessage,pe.showInfoPopup=!0,pe.buttonsEnabled=!1,pe.showSpinner=!1,pe.showValidationPopup=!0,de&&de.doRender(),e.abrupt("return");case 16:console.log("AddUserWindow.handleUserVerifyResponse: isVerified = "+a.isVerified),pe.showValidationPopup=!1,pe.infoMessage=pe.userName+" registered",pe.showInfoPopup=!0,pe.buttonsEnabled=!1,pe.fieldsEnabled=!0,pe.showSpinner=!1,pe.isVerified=!0,de&&de.doRender();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}pe.userName="",pe.emailAddress="",pe.mobilePhoneNo="",pe.password="",pe.password2="",pe.needRegistration=!1,pe.buttonsEnabled=!0,pe.fieldsEnabled=!0,pe.showInfoPopup=!1,pe.infoMessage="",pe.showSpinner=!1,pe.showValidationPopup=!1,pe.userId=0,pe.isVerified=!1;var fe=pe,be=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("AdminNavigatorWindow.constructor"),a.state={count:0},Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AdminNavigatorWindow.componentDidMount"),k.send(p.a.ipcShowNavBar,"admin"),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("AdminNavigatorWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){this.setState({count:this.state.count+1})}},{key:"render",value:function(){return console.log("AdminNavigatorWindow.render"),s.a.createElement("div",null,s.a.createElement(T,null))}}]),n}(s.a.Component),ve=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("BlankWindow.constructor"),a.state={count:0},Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("BlankWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("BlankWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){return console.log("BlankWindow.render"),s.a.createElement("div",null,s.a.createElement(T,null))}}]),n}(s.a.Component),ke="address not set";function we(){return(we=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U("clients.init","clts","info"),ke=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("getClients","clts","info"),n="https://"+ke+"/api/client",t&&(n+="?"+t),e.next=5,H.get(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee={init:function(e){return we.apply(this,arguments)},final:function(){},getClients:function(e){return ye.apply(this,arguments)}},Ce=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),Object(g.a)(a),a.state={count:0},n.client=JSON.parse(JSON.stringify(a.props.getClient())),console.log("ClientPopup.constructor - client: "+JSON.stringify(n.client,null,2)),n.title="Client @"+n.client.clientToken,Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("ClientPopup componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("ClientPopup componentWillUnmount"),null}},{key:"handleCloseClick",value:function(e){console.log("...ClientPopup handleCloseClick"),this.props.closePopup(),this.props.onClose(e)}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleCopyClientTokenClick",value:function(e){console.log("...ClientPopup.handleCopyClientTokenClick"),navigator.clipboard.writeText(n.client.clientToken).then((function(){})).catch((function(e){console.log("Something went wrong",e)}))}},{key:"render",value:function(){var e=this;console.log("ClientPopup render");var t=n.client,a="appliance"===t.clientType;return s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{className:"popup"},s.a.createElement("div",{className:"popup_inner_600x500"},s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},t.clientName)),s.a.createElement("table",{align:"center"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"Name:"),s.a.createElement("td",null,t.clientName)),s.a.createElement("tr",null,s.a.createElement("td",null,"Client Token:"),s.a.createElement("td",null,t.clientToken),s.a.createElement("td",null,"\xa0\xa0"),s.a.createElement("td",null,s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!1,size:"small",style:{width:"50px",height:"25px",color:"#0000b0"},onClick:function(t){return e.handleCopyClientTokenClick(t)}},"Copy"))),t.clientType?s.a.createElement("tr",null,s.a.createElement("td",null,"Client Type:"),s.a.createElement("td",null,"pc"===t.clientType?"pc":"Sentinel")):null,t.publicIPAddress?s.a.createElement("tr",null,s.a.createElement("td",null,"Public Address:"),s.a.createElement("td",null,t.publicIPAddress.substring(7))):null,t.localIPAddress?s.a.createElement("tr",null,s.a.createElement("td",null,"Local Address:"),s.a.createElement("td",null,t.localIPAddress)):null,t.userName?s.a.createElement("tr",null,s.a.createElement("td",null,"User Name:"),s.a.createElement("td",null,t.userName)):null,t.ispName?s.a.createElement("tr",null,s.a.createElement("td",null,"ISP:"),s.a.createElement("td",null,t.ispName)):null,s.a.createElement("tr",null,s.a.createElement("td",null,"On Line:"),s.a.createElement("td",null,t.isOnLine?"Yes":"No")),s.a.createElement("tr",null,s.a.createElement("td",null,"Logged In:"),s.a.createElement("td",null,t.isLoggedIn?"Yes":"No")),s.a.createElement("tr",null,s.a.createElement("td",null,"Iperf3 Count:"),s.a.createElement("td",null,t.iperf3UseCountDaily)),a&&s.a.createElement("tr",null,s.a.createElement("td",null,"Sentinel Update Time:"),s.a.createElement("td",null,t.sentinelUpdateTime)),a&&s.a.createElement("tr",null,s.a.createElement("td",null,"Sentinel Admin Update Time:"),s.a.createElement("td",null,t.sentinelAdminUpdateTime)),a&&s.a.createElement("tr",null,s.a.createElement("td",null,"Sentinel Web Update Time:"),s.a.createElement("td",null,t.sentinelWebUpdateTime)),a&&s.a.createElement("tr",null,s.a.createElement("td",null,"Updater Update Time:"),s.a.createElement("td",null,t.updaterUpdateTime))))),s.a.createElement(P,{onClick:function(t){return e.handleCloseClick(t)}}))))}}]),n}(s.a.Component);Ce.client=null,Ce.title="Client";var Se=Ce,_e=(s.a.Component,function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.clients;return console.log("ClientTable render"),console.log(t),s.a.createElement("table",{id:"client-table"},t&&t.map((function(t){return s.a.createElement("tr",{key:t.clientToken},s.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},s.a.createElement("div",{style:{textAlign:"left",marginLeft:20}},t.clientName)),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},t.userName),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},t.publicIPAddress.substring(7)),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},t.localIPAddress),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t.clientToken)}},t.isOnLine?"":"off line"))})))}}]),n}(s.a.Component)),Pe=null,xe=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("ClientsWindow.constructor"),a.state={count:0},Pe=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ClientsWindow.componentDidMount"),Ae("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("ClientsWindow.componentWillUnmount"),Pe=null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"handleClientTokenClick",value:function(e){console.log("ClientsWindow.clientTokenClick = "+e),n.clientToken=e,n.showClientPopup=!0,this.doRender()}},{key:"handleClientCloseClick",value:function(){console.log("ClientsWindow.handleClientCloseClick")}},{key:"hideClientPopup",value:function(){n.showClientPopup=!1,this.doRender()}},{key:"getClient",value:function(){return console.log("ClientsWindow.getClient"),n.clientByClientToken.get(n.clientToken)}},{key:"render",value:function(){var e=this;console.log("ClientsWindow.render");var t=n.clients,a=n.showClientPopup;return s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Clients")),a?s.a.createElement(Se,{getClient:function(){return e.getClient()},onClose:function(t){return e.handleClientCloseClick(t)},closePopup:this.hideClientPopup.bind(this)}):null,s.a.createElement("div",{style:{marginLeft:20,border:"1px solid #ccc",font:"14px Courier New",fontWeight:"bold",overflowY:"scroll"}},s.a.createElement(_e,{clients:t,onClick:function(t){return e.handleClientTokenClick(t)}})))}}]),n}(s.a.Component);function Ae(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(r.a)(o.a.mark((function e(t){var n,a,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getClients(t);case 2:if(n=e.sent,a=n.data,r=n.status,console.log("ClientsWindow.getClientsFromDB (response): status = "+r),!a.__hadError__){e.next=11;break}return console.log("ClientsWindow.getClientsFromDB: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),xe.infoMessage=a.__hadError__.errorMessage,Pe&&Pe.doRender(),e.abrupt("return");case 11:for(xe.clients=a,xe.clientByClientToken=new Map,i=0;i<xe.clients.length;i++)s=xe.clients[i],xe.clientByClientToken.set(s.clientToken,s);Pe&&Pe.doRender();case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}xe.clients=null,xe.clientByClientToken=new Map,xe.clientToken="",xe.infoMessage="",xe.showClientPopup=!1;var Te=xe,Oe=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("DownloadWindow.constructor"),a.state={count:0},Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("DownloadWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("DownloadWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){return console.log("DownloadWindow.render"),s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Download iipzy Sentinel Rapsberry Pi Image")),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left",fontWeight:"normal"}},s.a.createElement("p",null,"You'll need a Raspberry Pi 3 or 4 with 2 GB (or more) of memory and a 32 GB Micro SD Memory Card. ",s.a.createElement("br",null),"A Raspberry Pi 4 is needed if your Internet Connection speed is greater than 300MB/sec. ",s.a.createElement("br",null),s.a.createElement("br",null),"A good choice for a Raspberry Pi 4 kit is"," ",s.a.createElement("a",{href:"https://www.amazon.com/gp/product/B07XTRFD3Z/ref=ppx_yo_dt_b_asin_title_o04_s00?ie=UTF8&psc=1"},"here"),".\xa0\xa0Some simple assembly is required.",s.a.createElement("br",null),s.a.createElement("br",null),"A good choice for a Micro SD Card is"," ",s.a.createElement("a",{href:"https://www.amazon.com/gp/product/B073JWXGNT/ref=ppx_yo_dt_b_asin_title_o06_s00?ie=UTF8&psc=1"},"here"),s.a.createElement("br",null),s.a.createElement("br",null),"Download the Sentinel Raspberry Pi image"," ",s.a.createElement("a",{href:"https://iipzy.net:8001/api/clientupdate//bacec2a221264e32bdc3aa886e80a1b1"},"here"),s.a.createElement("br",null),s.a.createElement("br",null),"I recommend you use balenaEtcher to burn the Sentinel Raspberry Pi image to the Micro SD Card.",s.a.createElement("br",null),"You can find balanaEtcher"," ",s.a.createElement("a",{href:"https://www.balena.io/etcher/"},"here"),s.a.createElement("br",null),s.a.createElement("br",null),"Install the Micro SD Card with the image into the Raspberry Pi.\xa0\xa0 Connect the Raspberry Pi to the power supply.\xa0\xa0A little red led, that can be seen from the top, will light if power is on.\xa0\xa0Connect the Raspberry Pi to your local network.\xa0\xa0The Raspberry Pi Sentinel will then connect to the iipzy service.\xa0\xa0Once you have registered and logged in, you can connect to the Raspberry Pi Sentinel by clicking on ",s.a.createElement("strong",null,"Sentinel")," above.")))}}]),n}(s.a.Component),Ue=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("PasswordPopup.constructor"),a.state={password:""},Object(g.a)(a),a}return Object(h.a)(n,[{key:"getPassword",value:function(){return this.state.password}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("PasswordPopup.name="+t+", value="+this.state[t]),this.setState(Object(ae.a)({},t,n))}},{key:"handleCloseClick",value:function(e){console.log("PasswordPopup.handleCloseClick"),this.props.onSubmit(""),this.props.closePopup(),this.state.password=""}},{key:"handleSubmitClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.onSubmit(this.state.password),this.props.closePopup(),this.state.password="";case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isValidInput",value:function(){return!0}},{key:"render",value:function(){var e=this;return console.log("PasswordPopup render"),s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{className:"popup"},s.a.createElement("div",{className:"popup_inner"},s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Enter Password")),s.a.createElement("form",null,s.a.createElement(re,{type:"password",autofocus:!0,disabled:!1,name:"password",value:this.getPassword(),label:"Password",onChange:function(t){return e.handleChange(t)},error:"",porportionalWidth:!0}),s.a.createElement("h1",null,this.props.text),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.isValidInput(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t)}},"Submit")),s.a.createElement(P,{onClick:function(t){return e.handleCloseClick(t)}})))))}}]),n}(s.a.Component),Ie=null,Le=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("EditUserWindow.constructor"),a.windowTitle="Update User @ iipzy.com",a.userId=0,Ie=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("EditUserWindow.componentDidMount"),n.buttonsEnabled=!1,n.fieldsEnabled=!0,n.showPasswordPopup=!0,n.passwordValidated=!1;var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("EditUserWindow.componentWillUnmount"),Ie=null}},{key:"getUserData",value:function(){var e={userName:n.userName,emailAddress:n.emailAddress,mobilePhoneNo:n.mobilePhoneNo,password:n.password,password2:n.password2};return console.log("EditUserWindow.getUserData: "+JSON.stringify(e)),console.log("EditUserWindow.getUserData: emailAddress = "+e.emailAddress),e}},{key:"setUserData",value:function(e){console.log("EditUserWindow.setUserData: emailAddress = "+e.emailAddress),n.userName=e.userName,n.emailAddress=e.emailAddress,n.mobilePhoneNo=e.mobilePhoneNo,n.password=e.password,n.password2=e.password2}},{key:"getButtonsEnabled",value:function(){return console.log("EditUserWindow.getButtonsEnabled: "+n.buttonsEnabled),n.buttonsEnabled}},{key:"setButtonsEnabled",value:function(e){n.buttonsEnabled=e,console.log("EditUserWindow.setButtonsEnabled: "+n.buttonsEnabled)}},{key:"getFieldsEnabled",value:function(){return console.log("EditUserWindow.getFieldsEnabled: "+n.fieldsEnabled),n.fieldsEnabled}},{key:"setFieldsEnabled",value:function(e){n.fieldsEnabled=e,console.log("EditUserWindow.setFieldsEnabled: "+n.fieldsEnabled)}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"handleUpdateClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("EditUserWindow.handleUpdateClick"),console.log("userName="+t.userName),console.log("mobilePhoneNo="+t.mobilePhoneNo),console.log("emailAddress="+t.emailAddress),Re(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeleteClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("EditUserWindow handleDeleteClick"),je(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLoginClick",value:function(e){console.log("...handleLoginClick"),k.send(p.a.ipcLinkTo,p.a.urlLogin)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleInfoPopupClick",value:function(){console.log("...EditUserWindowhandleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,n.buttonsEnabled=!0,n.fieldsEnabled=!0,this.doRender()}},{key:"handlePasswordPopupClick",value:function(e){e===n.password?(console.log("...handlePasswordPopupClick: password match"),n.passwordValidated=!0,n.passwordSupplied=!0):e||(console.log("...handlePasswordPopupClick: password empty"),n.passwordValidated=!1,n.passwordSupplied=!1)}},{key:"hidePasswordPopup",value:function(){console.log("...hidePasswordPopup"),n.passwordValidated?(n.showPasswordPopup=!1,n.buttonsEnabled=!0):n.passwordSupplied||(n.showPasswordPopup=!1,n.buttonsEnabled=!1),n.fieldsEnabled=!0,this.doRender()}},{key:"render",value:function(){var e=this,t=n.isLoggedIn;console.log("EditUserWindow.render: isLoggedIn = "+t);var a=n.passwordSupplied,o=n.showInfoPopup,r=n.showPasswordPopup,i=n.showSpinner;return s.a.createElement("div",null,t&&r&&s.a.createElement(Ue,{onSubmit:function(t){return e.handlePasswordPopupClick(t)},closePopup:this.hidePasswordPopup.bind(this)}),o&&s.a.createElement(x,{title:"Edit User",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),i&&s.a.createElement(ne,null),!t&&!o&&s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},this.windowTitle)),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"You must be logged in to edit your user settings"),s.a.createElement(oe.a,{type:"button",variant:"contained",style:{width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleLoginClick(t)}},"Login"))),t&&!r&&a&&s.a.createElement(ce,{title:this.windowTitle,getUserData:this.getUserData,setUserData:this.setUserData,getButtonsEnabled:this.getButtonsEnabled,setButtonsEnabled:this.setButtonsEnabled,getFieldsEnabled:this.getFieldsEnabled,setFieldsEnabled:this.setFieldsEnabled,userNameDisabled:!0,button1Label:"Update",onSubmit:function(t){return e.handleUpdateClick(t)},button2Label:"Delete",onSubmit2:function(t){return e.handleDeleteClick(t)}}))}}]),n}(ce);function je(e){return We.apply(this,arguments)}function We(){return(We=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le.showSpinner=!0,Ie&&Ie.doRender(),e.next=4,ee.deleteUser(t);case 4:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=16;break}return console.log("EditUserWindow.deleteUser: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Le.buttonsEnabled=!1,Le.fieldsEnabled=!0,Le.infoMessage=a.__hadError__.errorMessage,Le.showInfoPopup=!0,Le.showSpinner=!0,Ie&&Ie.doRender(),e.abrupt("return");case 16:k.send(p.a.ipcSubmitLogout,{userName:Le.userName,authToken:Le.authToken}),Le.buttonsEnabled=!1,Le.fieldsEnabled=!0,Le.infoMessage=Le.userName+" deleted",Le.showInfoPopup=!0,Le.showSpinner=!1,Le.userId=0,Le.userName="",Le.emailAddress="",Le.mobilePhoneNo="",Le.password="",Le.password2="",Le.isAdmin=!1,Le.isLoggedIn=!1,Le.authToken="",Ie&&Ie.doRender();case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Le.showSpinner=!0,Ie&&Ie.doRender(),e.next=4,ee.updateUser(t);case 4:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=16;break}return console.log("EditUserWindow.updateUser: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Le.buttonsEnabled=!1,Le.fieldsEnabled=!0,Le.infoMessage=a.__hadError__.errorMessage,Le.showInfoPopup=!0,Le.showSpinner=!1,Ie&&Ie.doRender(),e.abrupt("return");case 16:Le.mobilePhoneNo=t.mobilePhoneNo,Le.emailAddress=t.emailAddress,Le.password=t.password,Le.buttonsEnabled=!1,Le.fieldsEnabled=!0,Le.infoMessage=Le.userName+" updated",Le.showInfoPopup=!0,Le.showSpinner=!1,Ie&&Ie.doRender();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Le.userName="",Le.emailAddress="",Le.mobilePhoneNo="",Le.password="",Le.password2="",Le.userId=0,Le.isAdmin=!1,Le.isLoggedIn=!1,Le.authToken="",Le.infoMessage="",Le.showInfoPopup=!1,Le.showPasswordPopup=!0,Le.showSpinner=!1,Le.passwordSupplied=!1,Le.passwordValidated=!1,Le.buttonsEnabled=!1,Le.fieldsEnabled=!0;var De=function(){var e=Object(r.a)(o.a.mark((function e(t,n){var a,r,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.userName,r=n.authToken,i=n.password,s=n.loginStatus,console.log("EditUserWindow.handleLoginStatus: userName = "+a+", loginStatus = "+s),Le.userName=a,Le.password=i,Le.password2=i,Le.isLoggedIn=s===p.a.loginStatusLoggedIn,Le.authToken=r,!Le.isLoggedIn||Le.emailAddress){e.next=10;break}return e.next=10,Be();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Be(){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.getUser();case 2:t=e.sent,n=t.data,t.status,console.log("EditUserWindow.handleUserGetResponse: emailAddress = "+n.emailAddress+", mph = "+n.mobilePhoneNo),Le.userId=n.userId,Le.emailAddress=n.emailAddress,Le.mobilePhoneNo=n.mobilePhoneNo,Le.isAdmin=n.isAdmin,Ie&&Ie.doRender();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k.on(p.a.ipcLoginStatus,De);var ze=Le,Ve=null,He=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("ForgotPasswordWindow.constructor"),a.state={update:!1,errors:{},count:0},a.data={userName:null,passwordResetCode:null,password:null,password2:null},Ve=Object(g.a)(a),a.schema={userName:ue.a.string().required().label("User Name").min(5).max(50),passwordResetCode:ue.a.string().required().label("Password Reset Code").min(6).max(6),password:ue.a.string().required().label("Password").min(5).max(50),password2:ue.a.string().required().label("Password Again").min(5).max(50)},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("forgotPasswordWindow componentDidMount"),this.data.userName=n.userName,this.data.passwordResetCode=n.passwordResetCode,this.data.password=n.password,this.data.password2=n.password2,this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("forgotPasswordWindow componentWillUnmount"),n.userName=this.data.userName,n.passwordResetCode=this.data.passwordResetCode,n.password=this.data.password,n.password2=this.data.password2,Ve=null}},{key:"validateProperty",value:function(e,t){console.log("...validateProperty: name="+e+", value = "+t);var n=Object(ae.a)({},e,t),a=Object(ae.a)({},e,this.schema[e]),o=ue.a.validate(n,a).error;return console.log("...validateProperty - had error = "+o),o?o.details[0].message:null}},{key:"validate",value:function(){var e=ue.a.validate(this.data,this.schema,{abortEarly:!1}).error;if(!e)return null;console.log("...validate - had error");var t,n={},a=Object(se.a)(e.details);try{for(a.s();!(t=a.n()).done;){var o=t.value;n[o.path[0]]=o.message}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("name="+t+", value="+this.data[t]);var a=this.state.errors,o=this.validateProperty(t,n);o?a[t]=o:delete a[t];var r=this.data;r[t]=n,this.setState({data:r,errors:a})}},{key:"handleClearClck",value:function(e){n.userName="",n.passwordResetCode="",n.password="",n.password2="",n.showGetCodeResponsePopup=!1,n.getCodeResponseMessage="",n.showSubmitResponsePopup=!1,n.getSubmitResponseMessage="",n.inputsEnabled=!0,n.buttonsEnabled=!0,n.submitButtonEnabled=!1,n.codeSent=!1,this.componentDidMount()}},{key:"handleGetCodeClick",value:function(e){console.log("...ForgotPasswordWindow handleGetCodeClick"),console.log("userName="+this.data.userName),function(e){qe.apply(this,arguments)}({userName:this.data.userName})}},{key:"handlePassword2Change",value:function(e){var t=e.target.name,n=e.target.value;if(console.log("name="+t+", value="+this.data[t]),this.data.password!==n){var a=this.state.errors;a[t]="passwords don't match";var o=this.data;return o[t]=n,void this.setState({data:o,errors:a})}return this.handleChange(e)}},{key:"handleSubmitClick",value:function(e){console.log("...ForgotPasswordWindow handleSubmitClick"),console.log("userName="+this.data.userName),console.log("masswordResetCode="+this.data.passwordResetCode),e.preventDefault();var t=this.validate();t&&console.log("...handleSubmitClick: errors = "+Object.values(t)),this.setState({errors:t||{}}),t||function(e){Ge.apply(this,arguments)}({userName:this.data.userName,passwordResetCode:this.data.passwordResetCode,password:this.data.password})}},{key:"isValidInput",value:function(){return this.isValidUserName()&&this.isValidPasswordResetCode()&&this.isValidPassword()&&this.data.password===this.data.password2}},{key:"isValidUserName",value:function(){return null!=this.data.userName&&this.data.userName.length>5}},{key:"codeSent",value:function(){return n.codeSent}},{key:"isValidPasswordResetCode",value:function(){return null!=this.data.passwordResetCode&&6===this.data.passwordResetCode.length}},{key:"isValidPassword",value:function(){return null!=this.data.password&&this.data.password.length>5}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=this.state.errors,l=this.data;console.log("ForgotPasswordWindow.renderInput: name="+e+", value="+l[e]);this.handleChange;return s.a.createElement(re,{type:n,name:e,label:t,value:l[e],error:i[e],autofocus:a,disabled:o,onChange:r})}},{key:"getResponseMessage",value:function(){return n.responseMessage}},{key:"handleResponsePopupClick",value:function(){console.log("...ForgotPasswordWindowhandleInfoPopupClick")}},{key:"hideResponsePopup",value:function(){n.showResponsePopup=!1,n.buttonsEnabled=!0,this.doRender()}},{key:"doRender",value:function(e,t){e&&t&&(this.data[e]=t),this.setState({count:this.state.count+1})}},{key:"render",value:function(){var e=this;console.log("forgotPasswordWindow.render");var t=n.inputsEnabled,a=n.buttonsEnabled,o=n.showResponsePopup,r=n.showSpinner,i=n.submitButtonEnabled;return s.a.createElement("div",null,s.a.createElement(T,null),r&&s.a.createElement(ne,null),o&&s.a.createElement(x,{title:"Forgot Password",getInfoMessage:function(){return e.getResponseMessage()},onSubmit:function(t){return e.handleResponsePopupClick(t)},closePopup:this.hideResponsePopup.bind(this)}),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Forgot Password")),s.a.createElement("div",{style:{textAlign:"left",fontWeight:"normal"}},s.a.createElement("p",null,'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa01. Enter your User Name then click the "Get Code" button below.',s.a.createElement("br",null)," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa02. A Password Reset Code will be sent to the user's email address.",s.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa03. Enter the code and the new password (twice), then click the "Submit" button.')),s.a.createElement("form",null,this.renderInput("userName","User Name","text",!0,!t||this.codeSent(),(function(t){return e.handleChange(t)})),this.renderInput("passwordResetCode","Password Reset Code","text",!1,!t||!this.isValidUserName()||!this.codeSent(),(function(t){return e.handleChange(t)})),this.renderInput("password","Password","password",!1,!t||!this.isValidPasswordResetCode(),(function(t){return e.handleChange(t)})),this.renderInput("password2","Password Again","password",!1,!t||!this.isValidPassword(),(function(t){return e.handlePassword2Change(t)})),s.a.createElement("div",null,"\xa0"),s.a.createElement("div",{style:{marginLeft:"45px"}},s.a.createElement("table",{align:"left"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!a||!this.isValidUserName()||this.isValidPasswordResetCode(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleGetCodeClick(t)}},"Get Code"))),s.a.createElement("td",null,s.a.createElement("div",{style:{textAlign:"center",marginLeft:40,marginRight:40}},s.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!a||!this.isValidInput()||!i,style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t)}},"Submit"))),s.a.createElement("td",null,s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!a,style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleClearClck(t)}},"Clear")))))))))}}]),n}(s.a.Component);function qe(){return(qe=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He.buttonsEnabled=!1,He.showSpinner=!0,Ve&&Ve.doRender(),e.next=5,ee.sendPasswordResetCode(t);case 5:n=e.sent,a=n.data,n.status,a.__hadError__?(console.log("ForgotPasswordWindow.getResetCode: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),He.responseMessage=a.__hadError__.errorMessage):(He.responseMessage="Password Reset Code has been sent to user "+He.userName,He.codeSent=!0,He.submitButtonEnabled=!0),He.buttonsEnabled=!0,He.showResponsePopup=!0,He.showSpinner=!1,Ve&&Ve.doRender();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He.buttonsEnabled=!1,He.showSpinner=!0,Ve&&Ve.doRender(),e.next=5,ee.newPassword(t);case 5:n=e.sent,a=n.data,n.status,a.__hadError__?(console.log("ForgotPasswordWindow.updatePassword: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),He.responseMessage=a.__hadError__.errorMessage):(He.responseMessage="Password has been changed for user "+He.userName,He.inputsEnabled=!1,He.submitButtonEnabled=!1),He.buttonsEnabled=!0,He.showResponsePopup=!0,He.showSpinner=!1,Ve&&Ve.doRender();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}He.userName="",He.passwordResetCode="",He.password="",He.password2="",He.showResponsePopup=!1,He.responseMessage="",He.buttonsEnabled=!0,He.inputsEnabled=!0,He.submitButtonEnabled=!1,He.showSpinner=!1,He.codeSent=!1;k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.userName;console.log("ForgotPasswordWindow.handleLoginStatus: userName "+n),He.userName=n,null!=Ve&&Ve.doRender("userName",n)}));var Xe=He,Je=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("HomeNavigatorWindow.constructor"),a.state={count:0},Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("HomeNavigatorWindow.componentDidMount"),k.send(p.a.ipcShowNavBar,"home"),k.send(p.a.ipcLinkTo,p.a.urlIipzy),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("HomeNavigatorWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){this.state.count;this.setState({count:this.state.count+1})}},{key:"render",value:function(){return console.log("HomeNavigatorWindow.render"),s.a.createElement("div",null,s.a.createElement(T,null))}}]),n}(s.a.Component),Ye=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("IipzyWindow.constructor"),a.state={count:0},Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("IipzyWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("IipzyWindow.componentWillUnmount"),null}},{key:"handleSentinelClick",value:function(){console.log("IIpzyWindow.handleSentinelClick"),k.send(p.a.ipcLinkTo,p.a.urlSentinels)}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){var e=this;return console.log("IipzyWindow.render"),s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Welcome to the iipzy service")),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left",fontWeight:"normal"}},s.a.createElement("p",null,"Click on"," ",s.a.createElement("button",{class:"invisible-button",onClick:function(t){return e.handleSentinelClick(t)}},s.a.createElement("strong",null,"Sentinel"))," ","above to connect to your iipzy Sentinel device.",s.a.createElement("br",null),s.a.createElement("br",null),"From Sentinel, you can view your network latency, results of the most recent speed test, and a list of the devices on your network.")))}}]),n}(s.a.Component),Ze=n(51),$e=n(93),Ke=n.n($e);var Qe={get:function(e){var t=Ke.a.get(e);return U("cookie.get: key = "+e+", val = "+t,"cook","info"),t},set:function(e,t){return U("cookie.set: key = "+e+", val = "+t,"cook","info"),Ke.a.set(e,t)}},et="address not set";function tt(){return(tt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U("auth.init","auth","info"),et=t,U("auth.init: userName="+(n=Qe.get("userName")),"auth","info"),null==n){e.next=8;break}if(!Qe.get("password")){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("sendLogin","auth","info"),e.next=3,H.post("https://"+et+"/api/auth/login",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return rt.apply(this,arguments)}function rt(){return(rt=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("sendLogout","auth","info"),e.next=3,H.post("https://"+et+"/api/auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=Object(r.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U("auth.login","auth","info"),U("userName="+(t=Qe.get("userName")),"auth","info"),null==t){e.next=10;break}if(null==(n=Qe.get("password"))){e.next=10;break}return a=Object(Ze.a)(n),e.next=9,ut(t,a);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("submitLoginRequest","auth","info"),n=t.userName,a=t.password,e.next=4,ut(n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){return(lt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("submitLogoutRequest","auth","info"),n=t.userName,e.next=4,dt(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e,t){return ct.apply(this,arguments)}function ct(){return(ct=Object(r.a)(o.a.mark((function e(t,n){var a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(">>>loginAsync","auth","info"),e.next=3,nt({userName:t,password:n});case 3:if(a=e.sent,r=a.data,U("loginAsync: status = "+(i=a.status),"auth","info"),i!==p.a.httpStatusOk){e.next=13;break}return U("loginAsync: succeeded","auth","info"),e.next=11,mt(t,n,r.authToken,r.isLoggedIn?p.a.loginStatusLoggedIn:p.a.loginStatusLoginFailed,r.isAdmin);case 11:e.next=16;break;case 13:return U("loginAsync: failed","auth","info"),e.next=16,mt(t,"","",p.a.loginStatusLoginFailed,!1);case 16:return U("<<<loginAsync","auth","info"),e.abrupt("return",{data:r,status:i});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(r.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(">>>logoutAsync","auth","info"),e.next=3,ot();case 3:if(n=e.sent,a=n.data,U("logoutAsync: status = "+(r=n.status),"auth","info"),r!==p.a.httpStatusOk){e.next=13;break}return U("logoutAsync: succeeded","auth","info"),e.next=11,mt(t,"","",p.a.loginStatusLoggedOut,!1);case 11:e.next=16;break;case 13:return U("logoutAsync: failed","auth","info"),e.next=16,mt(t,"","",p.a.loginStatusLoggedOut,!1);case 16:return U("<<<logoutAsync","auth","info"),e.abrupt("return",{data:a,status:r});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t,n,a,o,r){return ht.apply(this,arguments)}function ht(){return(ht=Object(r.a)(o.a.mark((function e(t,n,a,r,i,s){var l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=void 0===s||s,U(">>>handleCompletion: userName="+t+", authToken = "+a+", loginStatus = "+r+", isAdmin = "+i,"auth"),H.setAuthTokenHeader(a),k.send(p.a.ipcLoginStatus,{userName:t,password:n,authToken:a,loginStatus:r,isAdmin:i,onUserCommand:l}),U("handleCompletion after sending credentials","auth","verbose"),Qe.set("userName",t),r===p.a.loginStatusLoggedIn&&a&&""!==a?Qe.set("password",Object(Ze.c)(n)):Qe.set("password",""),U("<<<handleCompletion","auth","info");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return(gt=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(">>>reLoginAsync","auth","info"),U("reLoginAsync: userName="+(t=Qe.get("userName")),"auth","info"),n=!1,null==t){e.next=11;break}if(null==(a=Qe.get("password"))){e.next=11;break}return r=Object(Ze.a)(a),n=!0,e.next=11,ut(t,r);case 11:if(n){e.next=14;break}return e.next=14,mt(t,"","",p.a.loginStatusLoginFailed,!1,!1);case 14:U("<<<reLoginAsync","auth","info");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft={init:function(e){return tt.apply(this,arguments)},final:function(){},login:function(){return it.apply(this,arguments)},loginRequest:function(e){return st.apply(this,arguments)},logoutRequest:function(e){return lt.apply(this,arguments)},reLoginAsync:function(){return gt.apply(this,arguments)}},bt=null,vt=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleKeyPress=function(e,t){console.log("---handleKeyPress: key = "+e.key+", title = "+t)},console.log("LoginWindow.constructor"),a.state={count:0},bt=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("LoginWindow.componentDidMount"),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("LoginWindow.componentWillUnmount"),bt=null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getUserName",value:function(){return n.userName}},{key:"getPassword",value:function(){return n.password}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"getSubmitButtonEnabled",value:function(){return n.buttonsEnabled&&(n.isLoggedIn||n.userName.length>=5&&n.password.length>=5)}},{key:"handleInfoPopupClick",value:function(){console.log("LoginWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,n.buttonsEnabled=!0,this.doRender()}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;switch(console.log("LoginWindow.handleChange: "+t+" = "+a),t){case"userName":n.userName=a;break;case"password":n.password=a}this.doRender()}},{key:"handleSubmitClick",value:function(e,t){console.log("LoginWindow.handleSubmitClick: title = "+t),n.buttonsEnabled=!1,n.title=t,this.doRender(),n.isLoggedIn?function(e){wt.apply(this,arguments)}({userName:n.userName,authToken:n.authToken}):function(e){kt.apply(this,arguments)}({userName:n.userName,password:n.password})}},{key:"render",value:function(){var e=this;console.log("loginWindow render");var t=n.isLoggedIn,a=n.showInfoPopup,o=n.showSpinner,r=n.title;return s.a.createElement("div",null,s.a.createElement(T,null),a&&s.a.createElement(x,{title:r,getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),!t&&s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Log in @ iipzy.com")),t&&s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Log out @ iipzy.com")),o&&s.a.createElement(ne,null),!a&&!t&&s.a.createElement("form",null,s.a.createElement(re,{type:"text",autofocus:!0,disabled:t,name:"userName",value:this.getUserName(),label:"User Name",onChange:function(t){return e.handleChange(t)},error:""}),s.a.createElement(re,{type:"password",autofocus:!1,hidden:t,disabled:t,name:"password",value:this.getPassword(),label:"Password",onChange:function(t){return e.handleChange(t)},error:""}),s.a.createElement("div",null,"\xa0"),s.a.createElement("div",{style:{marginLeft:"45px"}},s.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.getSubmitButtonEnabled(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t,"Log in")}},"Login"))),!a&&t&&s.a.createElement("form",null,s.a.createElement(re,{type:"text",autofocus:!0,disabled:t,name:"userName",value:this.getUserName(),label:"User Name",onChange:function(t){return e.handleChange(t)},error:""}),s.a.createElement("div",null,"\xa0"),s.a.createElement("div",{style:{marginLeft:"45px"}},s.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.getSubmitButtonEnabled(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t,"Log out")}},"Logout"))))}}]),n}(s.a.Component);function kt(){return(kt=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vt.showSpinner=!0,bt&&bt.doRender(),e.next=4,ft.loginRequest(t);case 4:n=e.sent,a=n.data,console.log("LoginWindow.loginRequest (response): data = "+JSON.stringify(a,null,2)),a.__hadError__?(vt.infoMessage=a.__hadError__.errorMessage,vt.showInfoPopup=!0):(vt.infoMessage="Successfully logged in",vt.showInfoPopup=!1),vt.buttonsEnabled=!0,vt.showSpinner=!1,bt&&bt.doRender();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(){return(wt=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vt.showSpinner=!0,bt&&bt.doRender(),e.next=4,ft.logoutRequest(t);case 4:n=e.sent,a=n.data,console.log("LoginWindow.logoutRequest (response): data = "+JSON.stringify(a,null,2)),a.__hadError__?vt.infoMessage=a.__hadError__.errorMessage:vt.infoMessage="Successfully logged out",vt.password="",vt.showInfoPopup=!0,vt.showSpinner=!1,bt&&bt.doRender();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}vt.authToken="",vt.buttonsEnabled=!0,vt.infoMessage="",vt.isLoggedIn=!1,vt.password="",vt.showInfoPopup=!1,vt.showSpinner=!1,vt.title="",vt.userName="";k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.userName,a=t.authToken,o=t.loginStatus;console.log("LoginWindow.handleLoginStatus: userName="+n+", loginStatus = "+o+", authToken = "+a),vt.userName=n||"",vt.authToken=a,vt.isLoggedIn=o===p.a.loginStatusLoggedIn,bt&&bt.doRender()})),k.on(p.a.ipcUserAddVerified,(function(e,t){vt.userName=t.userName,null!=bt&&bt.doRender()}));var yt=vt,Et=n(69),Ct=n.n(Et),St=n(167),_t=n.n(St),Pt=(n(331),null),xt=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("ClientPicker.constructor"),Pt=Object(g.a)(a),a.state={count:0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ClientPicker.componentDidMount"),At("sentinelsOnly=1");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("ClientPicker.componentWillUnmount"),Pt=null}},{key:"getClients",value:function(){return console.log("ClientPicker.getClients"),n.clientsFiltered}},{key:"getDisabled",value:function(){return this.props.getDisabled()}},{key:"getSelectedClient",value:function(){return console.log("clientPicker.getSelectedClient: "+n.selectedClient),n.selectedClient}},{key:"handleSelect",value:function(e){n.selectedClient=e.value,console.log("clientPicker.handleSelect: "+n.selectedClient),this.props.onPick(n.clientTokenByEntryString.get(n.selectedClient))}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){var e=this;return console.log("ClientPicker.render"),s.a.createElement("div",null,s.a.createElement(_t.a,{disabled:this.getDisabled(),options:this.getClients(),onChange:function(t){return e.handleSelect(t)},value:this.getSelectedClient(),placeholder:"-------------------- Select a client ---------------------"}))}}]),n}(s.a.Component);function At(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(r.a)(o.a.mark((function e(t){var n,a,r,i,s,l,u,c,d,p,m,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getClients(t);case 2:if(n=e.sent,a=n.data,r=n.status,console.log("ClientPicker.getClientsFromDB (response): status = "+r),!a.__hadError__){e.next=9;break}return console.log("ClientPicker.handleClientsGetResponse: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),e.abrupt("return");case 9:if(a){for(xt.clientsFiltered=[],xt.clientTokenByEntryString=new Map,xt.entryStringByClientToken=new Map,i=0;i<a.length;i++)s=a[i],l=s.clientName,u=s.clientType,c=s.clientToken,d=s.publicIPAddress,p=s.localIPAddress,m=s.isOnLine,"appliance"===u&&(h=l+"  "+d+"  "+p+(m?"":"  - offline"),xt.clientsFiltered.push(h),xt.clientTokenByEntryString.set(h,c),xt.entryStringByClientToken.set(c,h));xt.selectedClientToken&&(xt.selectedClient=xt.entryStringByClientToken.get(xt.selectedClientToken))}Pt&&(xt.selectedClientToken=Pt.props.getSelectedClientToken()),Pt&&Pt.doRender();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}xt.clientsFiltered=[],xt.clientTokenByEntryString=new Map,xt.entryStringByClientToken=new Map,xt.selectedClient="",xt.selectedClientToken="";var Tt=xt,Ot="address not set";function Ut(){return(Ut=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U("sentinelAdmin.init","sadm","info"),Ot=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(){return(It=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U("sentinelAdmin.getSentinelAdminStatus","sadm","verbose"),!t){e.next=5;break}return e.next=4,H.get("https://"+Ot+"/api/sentineladmin/status?tgtclienttoken="+t);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(){return(Lt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("updater.postSentinelAdmin","updt","info"),delete(n=JSON.parse(JSON.stringify(t))).actionUuid,e.next=5,H.post("https://"+Ot+"/api/sentineladmin/action",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jt={init:function(e){return Ut.apply(this,arguments)},final:function(){},getSentinelAdminStatus:function(e){return It.apply(this,arguments)},postSentinelAdmin:function(e){return Lt.apply(this,arguments)}},Wt=null,Rt=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),Wt=Object(g.a)(a),a.state={count:0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("SentinelAdminWindow componentDidMount"),this.getSentinelAdminSettings();try{n.statusInterval=setInterval(Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.inSendSentinelAdminStatusGetRequest){t.next=5;break}return e.inSendSentinelAdminStatusGetRequest=!0,t.next=4,Mt();case 4:e.inSendSentinelAdminStatusGetRequest=!1;case 5:case"end":return t.stop()}}),t)}))),1e3)}catch(t){console.log("(Exception) "+t)}}},{key:"componentWillUnmount",value:function(){console.log("SentinelAdminWindow componentWillUnmount"),clearInterval(n.statusInterval),n.statusInterval=null,Wt=null}},{key:"getSentinelAdminSettings",value:function(){var e=Qe.get("sentinelAdminSettings");if(e){var t=e.tgtClientToken,a=e.action;t&&(n.tgtClientToken=t),a&&(n.action=a)}}},{key:"handleSaveClick",value:function(e){console.log("...SentinelAdminWindow handleSaveClick"),Qe.set("sentinelAdminSettings",{tgtClientToken:n.tgtClientToken,action:n.action})}},{key:"handleSubmitClick",value:function(e){var t=this;console.log("...SentinelAdminWindow handleSubmitClick"),n.submitTimeout=setTimeout((function(){n.submitTimeout&&(n.waitForInProgress=!1,n.status="timed out",t.doRender())}),3e4),n.waitForInProgress=!0,n.status="contacting server...",this.doRender(),function(e){Bt.apply(this,arguments)}({tgtClientToken:n.tgtClientToken,action:n.action,actionUuid:Ct()()})}},{key:"handleActionChange",value:function(e){console.log("...SentinelAdminWindow handleActionChange: "+e.target.value),n.action=e.target.value,this.doRender()}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getClientToken",value:function(){return n.tgtClientToken}},{key:"getDisabled",value:function(){return n.waitForInProgress||n.inProgress}},{key:"getEnableSave",value:function(){return!0}},{key:"getEnableSubmit",value:function(){return!(n.tgtClientToken.length<16)&&(n.inProgress&&(n.waitForInProgress=!1,n.submitTimeout&&(clearTimeout(n.submitTimeout),n.submitTimeout=null)),!n.waitForInProgress&&!n.inProgress)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleClientPick",value:function(e){console.log("SentinelAdminWindow.handleClientPick: "+e),n.tgtClientToken=e}},{key:"handleInfoPopupClick",value:function(){console.log("SentinelAdminWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,this.doRender()}},{key:"render",value:function(){var e=this;console.log("SentinelAdminWindow render");var t=n.action,a=n.waitForInProgress||n.inProgress,o=n.status,r=a,i=n.showInfoPopup;return s.a.createElement("div",null,s.a.createElement(T,null),r&&s.a.createElement(ne,null),i&&s.a.createElement(x,{title:"Sentinel Admin",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),!i&&s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Sentinel Administration")),s.a.createElement("div",{style:{marginLeft:"20px"}},s.a.createElement("table",{align:"left"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"Client:"),s.a.createElement("td",null,s.a.createElement(Tt,{onPick:function(t){return e.handleClientPick(t)},getDisabled:this.getDisabled,getSelectedClientToken:this.getClientToken}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"Action:\xa0\xa0\xa0\xa0\xa0\xa0"),s.a.createElement("table",{align:"left"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartSentinel,checked:t===p.a.adminCmd_sentinel_restartSentinel,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Sentinel\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartSentinelAdmin,checked:t===p.a.adminCmd_sentinel_restartSentinelAdmin,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Sentinel Admin\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartSentinelWeb,checked:t===p.a.adminCmd_sentinel_restartSentinelWeb,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Sentinel Web\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartUpdater,checked:t===p.a.adminCmd_sentinel_restartUpdater,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Updater\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_reboot,checked:t===p.a.adminCmd_sentinel_reboot,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Reboot\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_sendLogs,checked:t===p.a.adminCmd_sentinel_sendLogs,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Send Logs"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_setLogLevelDetailed,checked:t===p.a.adminCmd_sentinel_setLogLevelDetailed,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Set Log Level = Detailed"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_setLogLevelNormal,checked:t===p.a.adminCmd_sentinel_setLogLevelNormal,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Set Log Level = Normal")))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0"),s.a.createElement("td",null,s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSave(),style:{marginLeft:"100px",width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSaveClick(t)}},"Save"),s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSubmit(),style:{marginLeft:"50px",width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t)}},"Submit"))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("hr",{width:"1000%",height:"20",border:"none"}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"Status:"),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"activity-status-text",size:"40",value:o,readOnly:!0}))))))))}}]),n}(s.a.Component);function Mt(){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.getSentinelAdminStatus(Rt.tgtClientToken);case 2:t=e.sent,n=t.data,(a=t.status)&&a===p.a.httpStatusOk&&(r=n.adminStatus,console.log("SentinelAdminWindow.getSentinelAdminStatus: status = "+JSON.stringify(r,null,2)),Rt.inProgress=r.inProgress,Rt.waitForInProgress||(Rt.status=r.step),r.failed&&(Rt.status="failed",Rt.waitForInProgress=!1,Rt.submitTimeout&&(clearTimeout(Rt.submitTimeout),Rt.submitTimeout=null))),Wt&&Wt.doRender();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(){return(Bt=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.postSentinelAdmin(t);case 2:n=e.sent,a=n.data,n.status,console.log("SentinelAdminWindow.postSentinelAdmin: response = "+JSON.stringify(a,null,2)),a.__hadError__&&(console.log("SentinelAdminWindow.postSentinelAdmin: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Rt.infoMessage=a.__hadError__.errorMessage,Rt.showInfoPopup=!0,Rt.buttonsEnabled=!1,Rt.status="failed",Rt.waitForInProgress=!1,Rt.inProgress=!1,Rt.submitTimeout&&(clearTimeout(Rt.submitTimeout),Rt.submitTimeout=null)),Wt&&Wt.doRender();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Rt.action=p.a.adminCmd_sentinel_none,Rt.infoMessage="",Rt.inProgress=!1,Rt.showInfoPopup=!1,Rt.status="done",Rt.statusInterval=null,Rt.submitTimeout=null,Rt.tgtClientToken="",Rt.waitForInProgress=!1;var Ft=Rt,zt=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.clients;return console.log("SentinelTable render"),console.log(t),s.a.createElement("table",{id:"sentinel-table"},t&&t.map((function(t){return s.a.createElement("tr",{key:t.clientToken},s.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},s.a.createElement("div",{style:{textAlign:"left",marginLeft:20}},t.clientName)),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.localIPAddress),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.isOnLine?"":"off line"),s.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),s.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.isWiFi?"wifi":""))})))}}]),n}(s.a.Component),Vt=null,Ht=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("SentinelsWindow.constructor"),a.state={count:0},Vt=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("SentinelsWindow.componentDidMount"),function(e){qt.apply(this,arguments)}("localSentinelsOnly=1")}},{key:"componentWillUnmount",value:function(){console.log("SentinelsWindow.componentWillUnmount"),Vt=null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"handleLocalIPAddressClick",value:function(e){if(console.log("SentinelsWindow.clientTokenClick = "+e.localIPAddress+", isOnLine = "+e.isOnLine),e.isOnLine){var t={userName:Qe.get("userName"),password:Qe.get("password"),from:window.location.origin},n=Ze.b.encrypt(JSON.stringify(t));window.location.replace("https://iipzy.net:8443?params="+encodeURI(n))}}},{key:"handleLoginClick",value:function(e){console.log("SentinelsWindow.handleLoginClick"),k.send(p.a.ipcLinkTo,p.a.urlLogin)}},{key:"render",value:function(){var e=this;console.log("SentinelsWindow.render");var t=n.clients,a=n.isLoggedIn,o=t?t.length:0;return!t&&a||1===o?s.a.createElement("div",null):s.a.createElement("div",null,s.a.createElement(T,null),s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Sentinel")),!a&&s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"You must be logged in to connect to your iipzy Sentinel"),s.a.createElement(oe.a,{type:"button",variant:"contained",style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleLoginClick(t)}},"Login"))),a&&o>1&&s.a.createElement("div",{align:"center",style:{width:"600px",height:"120px",font:"14px Courier New",fontWeight:"bold"}},s.a.createElement(zt,{clients:t,onClick:function(t){return e.handleLocalIPAddressClick(t)}})),a&&0===o&&s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Your network does not have an iipzy Sentinel"))))}}]),n}(s.a.Component);function qt(){return(qt=Object(r.a)(o.a.mark((function e(t){var n,a,r,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getClients(t);case 2:if(n=e.sent,a=n.data,r=n.status,console.log("SentinelsWindow.getClientsFromDB (response): status = "+r),!a.__hadError__){e.next=11;break}return console.log("SentinelsWindow.getClientsFromDB: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Ht.infoMessage=a.__hadError__.errorMessage,Vt&&Vt.doRender(),e.abrupt("return");case 11:if(Ht.clients=a,1===Ht.clients.length)null!=Vt&&(i={localIPAddress:Ht.clients[0].localIPAddress,isOnLine:Ht.clients[0].isOnLine},Vt.handleLocalIPAddressClick(i));else{for(Ht.clientByClientToken=new Map,s=0;s<Ht.clients.length;s++)l=Ht.clients[s],Ht.clientByClientToken.set(l.clientToken,l);Vt&&Vt.doRender()}case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ht.clients=null,Ht.clientByClientToken=new Map,Ht.clientToken="",Ht.infoMessage="",Ht.isLoggedIn=!1;k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.userName,a=(t.authToken,t.password,t.loginStatus);console.log("SentinelsWindow.handleLoginStatus: userName = "+n+", loginStatus = "+a),Ht.isLoggedIn=a===p.a.loginStatusLoggedIn}));var Gt=Ht,Xt="address not set";function Jt(){return(Jt=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U("updater.init","updt","info"),Xt=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(){return(Yt=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U("getUpdaterStatus: tgtClientToken = "+t,"updt","verbose"),!t){e.next=5;break}return e.next=4,H.get("https://"+Xt+"/api/updater/status?tgtclienttoken="+t);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(){return(Zt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("updater.postUpdaterUpdate","updt","info"),delete(n=JSON.parse(JSON.stringify(t))).updateUuid,e.next=5,H.post("https://"+Xt+"/api/updater/update",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $t={init:function(e){return Jt.apply(this,arguments)},final:function(){},getUpdaterStatus:function(e){return Yt.apply(this,arguments)},postUpdaterUpdate:function(e){return Zt.apply(this,arguments)}},Kt=null,Qt=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("UpdaterWindow.constructor"),Kt=Object(g.a)(a),a.state={count:0},a.inSendUpdaterStatusGetRequest=!1,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("UpdaterWindow.componentDidMount"),this.getUpdaterSettings();try{n.statusInterval=setInterval(Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.inSendUpdaterStatusGetRequest){t.next=5;break}return e.inSendUpdaterStatusGetRequest=!0,t.next=4,en();case 4:e.inSendUpdaterStatusGetRequest=!1;case 5:case"end":return t.stop()}}),t)}))),1e3)}catch(t){console.log("(Exception) "+t)}}},{key:"componentWillUnmount",value:function(){console.log("UpdaterWindow.componentWillUnmount"),clearInterval(n.statusInterval),n.statusInterval=null,Kt=null}},{key:"handleSaveClick",value:function(e){console.log("...UpdaterWindow handleSaveClick"),Qe.set("updaterSettings",{tgtClientToken:n.tgtClientToken,updateType:n.updateType})}},{key:"handleSubmitClick",value:function(e){var t=this;console.log("...UpdaterWindow handleSubmitClick"),n.submitTimeout=setTimeout((function(){n.submitTimeout&&(n.waitForInProgress=!1,n.status="timed out",t.doRender())}),3e4),n.waitForInProgress=!0,n.status="contacting server...",this.doRender(),Qe.set("updaterSettings",{tgtClientToken:n.tgtClientToken,updateType:n.updateType}),function(e){nn.apply(this,arguments)}({tgtClientToken:n.tgtClientToken,updateType:n.updateType,updateUuid:Ct()()})}},{key:"getUpdaterSettings",value:function(){var e=Qe.get("updaterSettings");if(e){var t=e.tgtClientToken,a=e.updateType;t&&(n.tgtClientToken=t),a&&(n.updateType=a),null!=Kt&&Kt.doRender()}}},{key:"handleUpdateTypeChange",value:function(e){console.log("...UpdaterWindow handleUpdateTypeChange: "+e.target.value),n.updateType=e.target.value,this.doRender()}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getClientToken",value:function(){return n.tgtClientToken}},{key:"getDisabled",value:function(){return n.waitForInProgress||n.inProgress}},{key:"getEnableSave",value:function(){return!0}},{key:"getEnableSubmit",value:function(){return!(n.tgtClientToken.length<16)&&(n.inProgress&&(n.waitForInProgress=!1,n.submitTimeout&&(clearTimeout(n.submitTimeout),n.submitTimeout=null)),!n.waitForInProgress&&!n.inProgress)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleClientPick",value:function(e){console.log("UpdaterWindow.handleClientPick: "+e),n.tgtClientToken=e}},{key:"handleInfoPopupClick",value:function(e){console.log("UpdaterWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,this.doRender()}},{key:"render",value:function(){var e=this;console.log("UpdaterWindow render");var t=n.updateType,a=n.waitForInProgress||n.inProgress,o=n.status,r=a,i=n.showInfoPopup;return s.a.createElement("div",null,s.a.createElement(T,null),r&&s.a.createElement(ne,null),i&&s.a.createElement(x,{title:"Sentinel Update",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),!i&&s.a.createElement("div",null,s.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},s.a.createElement("p",{style:{fontSize:"140%"}},"Update Sentinel")),s.a.createElement("div",{style:{marginLeft:"20px"}},s.a.createElement("table",{align:"left"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"Client:"),s.a.createElement("td",null,s.a.createElement(Tt,{onPick:function(t){return e.handleClientPick(t)},getDisabled:this.getDisabled,getSelectedClientToken:this.getClientToken}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"Update Type:\xa0"),s.a.createElement("table",{align:"left"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-pi",checked:"iipzy-pi"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Sentinel\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-sentinel-admin",checked:"iipzy-sentinel-admin"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Sentinel Admin\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-sentinel-web",checked:"iipzy-sentinel-web"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Sentinel Web\xa0"),s.a.createElement("tr",null,s.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-updater",checked:"iipzy-updater"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Updater")))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0"),s.a.createElement("td",null,s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSave(),style:{marginLeft:"100px",width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleSaveClick(t)}},"Save"),s.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSubmit(),style:{marginLeft:"50px",width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleSubmitClick(t)}},"Submit"))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("hr",{width:"770%",height:"20",border:"none"}))),s.a.createElement("tr",null,s.a.createElement("td",null,"\xa0")),s.a.createElement("tr",null,s.a.createElement("td",null,"Status:"),s.a.createElement("td",null,s.a.createElement("input",{type:"text",name:"update-status-text",size:"40",value:o,readOnly:!0}))))))))}}]),n}(s.a.Component);function en(){return tn.apply(this,arguments)}function tn(){return(tn=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t.getUpdaterStatus(Qt.tgtClientToken);case 2:t=e.sent,n=t.data,(a=t.status)&&a===p.a.httpStatusOk&&(r=n.updateStatus,console.log("UpdaterWindow.getUpdaterStatus: status = "+JSON.stringify(r,null,2)),Qt.inProgress=r.inProgress,Qt.waitForInProgress||(Qt.status=r.step),r.failed&&(Qt.status="failed",Qt.waitForInProgress=!1,Qt.submitTimeout&&(clearTimeout(Qt.submitTimeout),Qt.submitTimeout=null))),Kt&&Kt.doRender();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nn(){return(nn=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$t.postUpdaterUpdate(t);case 2:n=e.sent,a=n.data,n.status,console.log("UpdaterWindow.postUpdaterUpdate: response = "+JSON.stringify(a,null,2)),a.__hadError__&&(console.log("UpdaterWindow.postUpdaterUpdate: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Qt.infoMessage=a.__hadError__.errorMessage,Qt.showInfoPopup=!0,Qt.buttonsEnabled=!1,Qt.status="failed",Qt.waitForInProgress=!1,Qt.inProgress=!1,Qt.submitTimeout&&(clearTimeout(Qt.submitTimeout),Qt.submitTimeout=null)),Kt&&Kt.doRender();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Qt.infoMessage="",Qt.inProgress=!1,Qt.showInfoPopup=!1,Qt.submitTimeout=null,Qt.status="done",Qt.statusInterval=null,Qt.tgtClientToken="",Qt.updateType="iipzy-pi",Qt.waitForInProgress=!1;var an=Qt,on=null,rn=function(e){Object(b.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).callBackendAPI=Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/express_backend");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),console.log("App.constructor"),a.state={count:0,data:null},on=Object(g.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("App.componentDidMount")}},{key:"doRender",value:function(){console.log("App.doRender");var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){n.loggedIn,n.navbarName;return s.a.createElement(s.a.Fragment,null,s.a.createElement(c.a,null,s.a.createElement(E,null),s.a.createElement(v.d,null,s.a.createElement(v.b,{path:p.a.urlAbout,exact:!0,component:O}),s.a.createElement(v.b,{path:p.a.urlAddUser,exact:!0,component:fe}),s.a.createElement(v.b,{path:p.a.urlAdministration,exact:!0,component:be}),s.a.createElement(v.b,{path:p.a.urlBlank,exact:!0,component:ve}),s.a.createElement(v.b,{path:p.a.urlClients,exact:!0,component:Te}),s.a.createElement(v.b,{path:p.a.urlDownload,exact:!0,component:Oe}),s.a.createElement(v.b,{path:p.a.urlEditUser,exact:!0,component:ze}),s.a.createElement(v.b,{path:p.a.urlForgotPassword,exact:!0,component:Xe}),s.a.createElement(v.b,{path:p.a.urlHome,exact:!0,component:Je}),s.a.createElement(v.b,{path:p.a.urlIipzy,exact:!0,component:Ye}),s.a.createElement(v.b,{path:p.a.urlLogin,exact:!0,component:yt}),s.a.createElement(v.b,{path:p.a.urlSentinelAdmin,exact:!0,component:Ft}),s.a.createElement(v.b,{path:p.a.urlSentinels,exact:!0,component:Gt}),s.a.createElement(v.b,{path:p.a.urlUpdater,exact:!0,component:an}),s.a.createElement(v.a,{to:p.a.urlBlank}),"}")))}}]),n}(i.Component);rn.loggedIn=!1,rn.navbarName="home",rn.props=null;k.on(p.a.ipcLoginStatus,(function(e,t){console.log("App.handleLoginStatus");var n=t.loginStatus;t.onUserCommand;rn.loggedIn=n===p.a.loginStatusLoggedIn,"home"===rn.navbarName&&(rn.loggedIn?k.send(p.a.ipcLinkTo,p.a.urlIipzy):k.send(p.a.ipcLinkTo,p.a.urlLogin))})),k.on(p.a.ipcShowNavBar,(function(e,t){console.log("App.handleShowNavBar: "+t),rn.navbarName=t,"admin"===rn.navbarName&&k.send(p.a.ipcLinkTo,p.a.urlClients),null!=on&&on.doRender()}));var sn=rn;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ln(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}var un="address not set",cn=null,dn=0,pn=!1,mn=0;function hn(){return(hn=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(">>>heartbeat.init","htbt","info"),un=t,U("..clientToken="+(cn=Qe.get("clientToken")),"htbt","info"),cn&&H.setClientTokenHeader(cn),setInterval(Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mn){e.next=11;break}return mn++,e.prev=2,e.next=5,vn();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),U("(Exception) heartbeat: "+e.t0,"htbt","error");case 10:mn--;case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),2e4),mn++,e.next=9,vn();case 9:mn--,U("<<<heartbeat.init","htbt","info");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gn(){var e=Qe.get("pseudoLocalIPAddress");if(!e){Date.now().toString();e=Math.floor(255*Math.random())+1+"."+(Math.floor(255*Math.random())+0)+"."+(Math.floor(255*Math.random())+0)+"."+(Math.floor(255*Math.random())+0)}return Qe.set("pseudoLocalIPAddress",e),e}function fn(){return bn.apply(this,arguments)}function bn(){return(bn=Object(r.a)(o.a.mark((function e(){var t,n,a,r,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("https://"+un+"/api/myIPAddress");case 2:if(t=e.sent,n=t.data,t.status!==p.a.httpStatusOk){e.next=15;break}return a=n.yourIPAddress,r=n.timestamp,i=gn(),U("heartbeat.createClient: newClientToken = "+(s=encodeURI(a+":"+i+":"+r)),"htbt","info"),e.next=12,H.post("https://"+un+"/api/client/client",{localIPAddress:i,clientType:"web",clientToken:s,clientName:"web client"});case 12:l=e.sent,l.status===p.a.httpStatusOk&&(U("heartbeat.createClient: clientToken = "+(cn=s),"htbt","info"),Qe.set("clientToken",cn),H.setClientTokenHeader(cn));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(){return kn.apply(this,arguments)}function kn(){return(kn=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(">>>heartbeat: isLoggedIn ="+pn+", isExiting = "+!1,"htbt","info"),e.next=4;break;case 4:if(cn){e.next=10;break}return e.next=7,fn();case 7:if(cn){e.next=10;break}return U("<<<heartbeat: no clientToken","htbt","info"),e.abrupt("return");case 10:return t={},U("heartbeat: before post - reqData = "+JSON.stringify(t,null,2),"htbt","info"),e.next=14,H.post("https://"+un+"/api/client/heartbeat",t);case 14:n=e.sent,a=n.data,U("heartbeat: status = "+(r=n.status),"htbt","verbose"),r!==p.a.httpStatusOk&&r===p.a.httpStatusUnauthorized&&(Qe.set("clientToken",null),cn=null),a&&(U("heartbeat: data = "+JSON.stringify(a,null,2),"htbt","verbose"),a.clientToken,(pn=a.isLoggedIn)?dn=0:0===dn?(U("heartbeat: login needed","htbt","info"),k.send(p.a.ipcClientLoginNeeded,!0),dn=5):dn--),U("<<<heartbeat","htbt","info");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k.on(p.a.ipcLoginStatus,(function(e,t){U("heartbeat handleLoginStatus: status = "+t.loginStatus,"htbt","info"),pn=t.loginStatus===p.a.loginStatusLoggedIn,H.setAuthTokenHeader(t.authToken)}));var wn={init:function(e){return hn.apply(this,arguments)}};function yn(){return(yn=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.a.render(s.a.createElement(c.a,null,s.a.createElement(sn,null)),document.getElementById("root")),e.next=3,wn.init("iipzy.net:8001");case 3:return e.next=5,ft.init("iipzy.net:8001");case 5:return t=e.sent,console.log("====== AFTER calling auth.init"),t?ft.login():(console.log("===========!hasCredentials"),k.send(p.a.ipcLinkTo,p.a.urlLogin)),console.log("====== AFTER calling auth.login"),e.next=11,Ee.init("iipzy.net:8001");case 11:return console.log("====== AFTER calling clients.init"),e.next=14,jt.init("iipzy.net:8001");case 14:return console.log("====== AFTER calling updater.init"),e.next=17,$t.init("iipzy.net:8001");case 17:return console.log("====== AFTER calling updater.init"),e.next=20,ee.init("iipzy.net:8001");case 20:console.log("====== AFTER calling user.init"),ln();case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){yn.apply(this,arguments)}()},51:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(62),o="bite-the-wax-tadpole-hank-jake$$";function r(t){var n=e.from(Object(a.randomBytes)(16)),r=Object(a.createCipheriv)("aes-256-ctr",o,n),i=r.update(t,"utf8","hex");return i+=r.final("hex"),"".concat(n.toString("hex"),":").concat(i.toString())}function i(t){if(!t||""===t)return"";var n=t.split(":"),r=e.from(n.shift(),"hex"),i=e.from(n.join(":"),"hex"),s=Object(a.createDecipheriv)("aes-256-ctr",o,r),l=s.update(i,"hex","utf8");return(l+=s.final("utf8")).toString()}t.b={encrypt:r,decrypt:i}}).call(this,n(12).Buffer)}},[[170,1,2]]]);
//# sourceMappingURL=main.c6f58e1c.chunk.js.map