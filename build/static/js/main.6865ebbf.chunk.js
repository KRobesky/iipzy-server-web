(this["webpackJsonpiipzy-client-web"]=this["webpackJsonpiipzy-client-web"]||[]).push([[0],{1:function(e,t,n){n(15);e.exports={reqAreYouServerUuid:"a962ed99-e788-49cd-aa67-b0a8317f1573",rspAreYouServerUuid:"7589c403-984c-4c8a-885b-48a65131d17b",reqDiscoveryUuid:"24e1c790-20b9-47e9-b4b7-77f15da4e191",rspDiscoveryUuid:"9c96377f-ee54-4d39-b4f0-fde43283ac73",port_server:"8001",port_sentinel_admin:"8005",port_sentinel_core:"8002",port_sentinel_updater:"8003",port_sentinel_web:"8008",port_sentinel_web_client_proxy:"8004",port_sentinel_web_server_proxy:"8002",port_traffic_control:"8007",server_cert:"/etc/iipzy/certificate/server.cert",server_key:"/etc/iipzy/certificate/server.key",pingTarget:"google.com",urlAbout:"/about",urlAddUser:"/addUser",urlAdministration:"/administration",urlBlank:"/blank",urlClients:"/clients",urlClientUpdate:"/clientUpdate",urlCloseSentinel:"/closeSentinel",urlDebug:"/debug",urlDevices:"/devices",urlDownload:"/download",urlEditUser:"/editUser",urlForgotPassword:"/forgotPassword",urlHome:"/home",urlIipzy:"/iipzy",urlLogin:"/login",urlLogLevel:"/logLevel",urlLogSend:"/logSend",urlNavigator:"/navigator",urlPingPlot:"/pingPlot",urlScheduler:"/scheduler",urlSentinelAdmin:"/sentinelAdmin",urlSentinelDiscovery:"/sentinelDiscovery",urlSentinelInUse:"/sentinelInUse",urlSentinelOnlineCheck:"/sentinelOnlineCheck",urlSentinels:"/sentinels",urlSettings:"/settings",urlStartup:"/startup",urlThroughputTest:"/throughputTest",urlUpdater:"/updater",ipcAAATest:"ipc_000",ipcAuthCredentialsUpdate:"ipc_001",ipcBloatLatencyStatusIperf3Down:"ipc_002",ipcBloatLatencyStatusIperf3DownFinal:"ipc_003",ipcBloatLatencyStatusIperf3Up:"ipc_004",ipcBloatLatencyStatusIperf3UpFinal:"ipc_005",ipcClearDials:"ipc_006",ipcClientLoginNeeded:"ipc_007",ipcClientName:"ipc_074",ipcClientShutdown:"ipc_008",ipcConnectionToken:"ipc_129",ipcConsoleLog:"ipc_009",ipcConsoleLogVerbose:"ipc_092",ipcDevicesReady:"ipc_075",ipcDevicesWindowMount:"ipc_179",ipcDevicesWindowUnmount:"ipc_180",ipcDeviceUpdated:"ipc_072",ipcDumpSentinelDeviceTable:"ipc_068",ipcExit:"ipc_010",ipcExiting:"ipc_011",ipcIperf3StatusDown:"ipc_012",ipcIperf3StatusUp:"ipc_013",ipcIsLocalClient:"ipc_177",ipcLinkTo:"ipc_014",ipcLoginStatus:"ipc_015",ipcLoginVerifyStatus:"ipc_157",ipcNavBarInfo:"ipc_176",ipcNominalLatencyStatus:"ipc_016",ipcNominalLatencyStatusFinal:"ipc_017",ipcNoop:"ipc_044",ipcPingPlotConvertDB:"ipc_056",ipcPingPlotData:"ipc_024",ipcPingPlotWindowButtonHome:"ipc_025",ipcPingPlotWindowButtonLeft:"ipc_026",ipcPingPlotWindowButtonLeftMarked:"ipc_027",ipcPingPlotWindowButtonRight:"ipc_028",ipcPingPlotWindowButtonRightMarked:"ipc_029",ipcPingPlotWindowButtonZoomChange:"ipc_030",ipcPingPlotWindowMount:"ipc_031",ipcPingPlotWindowButtonHomeEx:"ipc_114",ipcPingPlotWindowButtonLeftEx:"ipc_115",ipcPingPlotWindowButtonLeftMarkedEx:"ipc_116",ipcPingPlotWindowButtonRightEx:"ipc_117",ipcPingPlotWindowButtonRightMarkedEx:"ipc_118",ipcPingPlotWindowButtonZoomChangeEx:"ipc_119",ipcPingPlotWindowMountEx:"ipc_120",ipcPingPlotWindowUnmount:"ipc_178",ipcQuit:"ipc_067",ipcRendererReady:"ipc_033",ipcSentinelDiscoveryTryingSentinelIPAddress:"ipc_018",ipcSentinelDiscovery:"ipc_019",ipcSentinelSendState:"ipc_020",ipcSentinelOnlineCheck:"ipc_021",ipcSentinelOnlineStatus:"ipc_022",ipcServerAddress:"ipc_064",ipcShowNavBar:"ipc_146",ipcTestingState:"ipc_036",ipcTickStatusIperf3Down:"ipc_037",ipcThroughputTestFailedToGetServer:"ipc_038",ipcThrouputTestStatus:"ipc_087",ipcThroughputTestWindowButtonLeft:"ipc_089",ipcThroughputTestWindowButtonNewest:"ipc_088",ipcThroughputTestWindowButtonOldest:"ipc_091",ipcThroughputTestWindowButtonRight:"ipc_090",ipcThroughputTestWindowMount:"ipc_039",ipcThroughputTestWindowCancel:"ipc_175",ipcThroughputTestWindowStart:"ipc_174",ipcThroughputTestWindowStartStop:"ipc_040",ipcTickStatusIperf3Up:"ipc_041",ipcTickStatusNominalLatency:"ipc_042",ipcTimeOfTest:"ipc_043",ipcUserAddVerified:"ipc_127",ipcZZZNext:"ipc_181",configFilename:"iipzy",crashFilename:"iipzy-crash.txt",loginStatusLoggedOut:0,loginStatusLoggedIn:1,loginStatusLoginFailed:2,loginStatusVerified:3,loginStatusVerifyFailed:4,loginStatusNoServerAddress:5,sentinelStatusOnline:0,sentinelStatusOffline:1,sentinelStatusInUse:2,sentinelStatusNoAddress:3,sentinelStatusUnknown:4,sentinelStatusOnlineLoggedOut:5,pevLoginStatus:"pev_1001",pevLoginNeeded:"pev_1002",pevZZZNext:"pev_1003",httpCustomHeader_XAuthToken:"x-auth-token",httpCustomHeader_XClientToken:"x-client-token",httpCustomHeader_XConnToken:"x-conn-token",httpCustomHeader_XTimestamp:"x-timestamp",httpCustomHeader_XWebClient:"x-web-client",httpStatusOk:200,httpStatusCreated:201,httpStatusAccepted:202,httpStatusNoContent:204,httpStatusMultiStatus:207,httpStatusFound:302,httpStatusBadRequest:400,httpStatusUnauthorized:401,httpStatusForbidden:403,httpStatusNotFound:404,httpStatusConflict:409,httpStatusGone:410,httpStatusUnprocessableEntity:422,httpStatusInternalError:500,httpStatusNotImplemented:501,httpStatusConnRefused:900,httpStatusConnAborted:901,httpStatusConnReset:902,httpStatusSentinelInUse:903,httpStatusException:999,statusOk:0,statusAlreadyExists:10001,statusDoesNotExist:10002,statusInvalidVerificationCode:10003,statusGeneralSqlFailure:10004,statusException:10005,statusInvalidUserName:10006,statusInvalidPasswordResetCode:10007,statusCannotAllocateIperf3Server:10008,statusDailyIperf3LimitReached:10009,statusInvalidUpdateType:10010,statusUpdateInProgress:10011,statusRouteError:10012,statusMissingClientToken:10013,statusInvalidClientToken:10014,statusMissingAuthToken:10015,statusInvalidAuthToken:10016,statusMissingParam:10017,statusInvalidParam:10018,statusInvalidCredentials:10019,statusMissingConnectionToken:10020,statusInvalidConnectionToken:10021,statusAdminPriviledgeRequired:10022,statusInvalidClientType:10023,statusIperf3ServerBusy:10024,statusHttpError:10025,statusInvalidThirdPartyApi:10026,statusSentinelInUse:10027,statusAdminInProgress:10028,statusInvalidDownloadClient:10029,statusUserNotInWhiteList:10030,statusIperf3ServerFailed:10031,pingFlagNoop:0,pingFlagTcMode:1,pingMarkNormal:0,pingMarkDropped:1,pingMarkSavedRx:2,pingMarkSavedTx:4,objectType_null:"",objectType_clientInstance:"clientInstance",objectType_networkDevice:"networkDevice",objectType_server:"server",eventClass_null:"",eventClass_clientAdded:"clientAdded",eventClass_clientAddressChanged:"clientAddressChanged",eventClass_clientOnLineStatus:"clientOnLineStatus",eventClass_clientLoginStatus:"clientLoginStatus",eventClass_cpuusage:"cpuusage",eventClass_crash:"crash",eventClass_networkDeviceAdded:"networkDeviceAdded",eventClass_networkDeviceDeleted:"networkDeviceDeleted",eventClass_networkDeviceIPAddressChanged:"networkDeviceIPAddressChanged",eventClass_networkDeviceStatus:"networkDeviceStatus",eventClass_pingFail:"pingFail",eventId_null:"",eventActive_inactive:0,eventActive_active:1,eventActive_activeAutoInactive:2,alertTarget_null:0,alertTarget_email:1,alertTarget_sms:2,adminCmd_admin:"admin",adminCmd_getLogLevel:"get-log-level",adminCmd_setLogLevel:"set-log-level",adminCmd_sendLogs:"send-logs",adminCmd_sentinel_none:"none",adminCmd_sentinel_reboot:"reboot",adminCmd_sentinel_resetNetworkDevicesDatabase:"reset-network-devices-database",adminCmd_sentinel_restartSentinel:"restart-sentinel",adminCmd_sentinel_restartSentinelAdmin:"restart-sentinel-admin",adminCmd_sentinel_restartSentinelWeb:"restart-sentinel-web",adminCmd_sentinel_restartUpdater:"restart-updater",adminCmd_sentinel_sendLogs:"send-logs",adminCmd_sentinel_setLogLevelDetailed:"set-log-level-detailed",adminCmd_sentinel_setLogLevelNormal:"set-log-level-normal",clientType_null:"null",clientType_appliance:"appliance",clientType_pc:"pc",clientType_web:"web",clientMode_null:"null",clientMode_pcOnly:"pc-only",clientMode_sentinel:"sentinel",thirdPartyApiName_null:"null",thirdPartyApiName_email:"email",thirdPartyApiName_ipApi:"ipApi",thirdPartyApiName_ipGeolocation:"ipGeolocation",thirdPartyApiName_sms:"sms",headBuzzardUserId:1,endOfFile:0}},170:function(e,t,n){e.exports=n(332)},177:function(e,t,n){},182:function(e,t,n){},206:function(e,t){},208:function(e,t){},232:function(e,t){},234:function(e,t){},263:function(e,t){},264:function(e,t){},332:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),r=n(4),i=n(0),l=n.n(i),s=n(46),u=n.n(s),c=n(14),d=(n(176),n(1)),p=n.n(d),m=(n(177),n(5)),h=n(6),f=n(9),g=n(7),b=n(8),v=n(44);var k={send:function(e,t){console.log("---eventManager.send: channel = "+e);var n=new CustomEvent(e,{detail:{data:t||{}}});document.getElementById("root").dispatchEvent(n)},on:function(e,t){document.getElementById("root").addEventListener(e,(function(n){t(e,n.detail.data)}),!1)}},w=null,y=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleClick=function(e){console.log("==================NavBar.handleClick: url = "+e)},console.log("NavBar.constructor"),a.state={count:0},w=Object(f.a)(a),a}return Object(h.a)(n,[{key:"doRender",value:function(){console.log("NavBar.doRender");var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){var e=this,t=n.isAdmin,a=n.loggedIn,o=n.navbarName,r=n.userName;return console.log("NavBar.render: = "+o),l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},"home"===o&&l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},l.a.createElement("div",{className:"navbar-nav"},l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlIipzy)},to:p.a.urlIipzy},"iipzy"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlSentinels)},to:p.a.urlSentinels},"Sentinel"),!a&&l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlLogin)},to:p.a.urlLogin},"Log In"),a&&l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlLogin)},to:p.a.urlLogin},"Log Out"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlEditUser)},to:p.a.urlEditUser},"Edit User"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlForgotPassword)},to:p.a.urlForgotPassword},"Forgot Password"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlAddUser)},to:p.a.urlAddUser},"Register"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlAbout)},to:p.a.urlAbout},"About"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlDownload)},to:p.a.urlDownload},"Download"),t?l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlAdministration)},to:p.a.urlAdministration},"Administration"):null)),"admin"===o&&l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},l.a.createElement("div",{className:"navbar-nav"},l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlClients)},to:p.a.urlClients},"Clients"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlSentinelAdmin)},to:p.a.urlSentinelAdmin},"Admin"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlUpdater)},to:p.a.urlUpdater},"Update"),l.a.createElement(c.b,{className:"nav-item nav-link",onClick:function(){return e.handleClick(p.a.urlHome)},to:p.a.urlHome},"Home")))),l.a.createElement("div",{style:{marginLeft:24,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"100%"}},"User: ",r)))}}]),n}(l.a.Component);y.isAdmin=!1,y.navbarName="home",y.userName="not logged in";k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.isAdmin,a=t.loginStatus,o=t.userName;y.isAdmin=n,y.loggedIn=a===p.a.loginStatusLoggedIn,y.userName=y.loggedIn?o:"not logged in",null!=w&&w.doRender()})),k.on(p.a.ipcShowNavBar,(function(e,t){console.log("NavBar.handleShowNavBar: "+t),y.navbarName=t,null!=w&&w.doRender()}));var E=y,C=(n(182),n(168)),S=n(164),_=n.n(S),P=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("CloseButton.constructor"),a.state={linkCount:0},a}return Object(h.a)(n,[{key:"handleClick",value:function(e){console.log("CloseButton.handleClick"),this.props.onClick(e)}},{key:"render",value:function(){var e=this;return console.log("IipzyWindow.render"),l.a.createElement("div",null,l.a.createElement(_.a,{onClick:function(t){return e.handleClick(t)},type:"submit",style:{position:"absolute",top:"0px",right:"0px",border:"none",background:"none",outline:"none"}},l.a.createElement(C.a,{style:{height:30,width:30}})))}}]),n}(l.a.Component),x=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),Object(f.a)(a),a}return Object(h.a)(n,[{key:"getInfoMessage",value:function(){return this.props.getInfoMessage()}},{key:"handleSubmitClick",value:function(e){console.log("...Popup handleSubmitClick"),this.props.closePopup()}},{key:"render",value:function(){var e=this;return console.log("InfoPopup render"),l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{className:"popup"},l.a.createElement("div",{className:"popup_inner"},l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},this.props.title)),l.a.createElement("div",{style:{marginLeft:30,textAlign:"left"}},l.a.createElement("p",null,l.a.createElement("br",null),this.getInfoMessage())),l.a.createElement(P,{onClick:function(t){return e.handleSubmitClick(t)}}))))}}]),n}(l.a.Component),N=null,A=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("Navigator.constructor"),a.state={linkCount:0},N=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("Navigator.componentDidMount"),N=this}},{key:"componentWillUnmount",value:function(){console.log("Navigator.componentWillUnmount"),N=null}},{key:"handleLinkChange",value:function(){n.linkChange=!0,n.linkCount++,console.log("Navigator: handleLinkChange: "+n.link),this.setState({linkCount:n.linkCount})}},{key:"render",value:function(){var e=n.linkChange;n.linkChange=!1;var t=n.link;return console.log("Navigator.render: "+t+", linkChange = "+e),l.a.createElement("div",null,e&&l.a.createElement(v.d,null,l.a.createElement(v.a,{to:t})))}}]),n}(l.a.Component);A.link="",A.linkCount=0,A.linkChange=!1,k.on(p.a.ipcSentinelOnlineStatus,(function(e,t){})),k.on(p.a.ipcLinkTo,(function(e,t){console.log("navigator: "+t),A.link=t,N&&N.handleLinkChange()}));var T=A,O=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("AboutWindow.constructor"),a.state={count:0},Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AboutWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("AboutWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){console.log("AboutWindow.render");p.a.urlDownload;return l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"About iipzy"),l.a.createElement("p",null,"iipzy monitors your internet connection for reliability and speed."),l.a.createElement("p",null,"An iipzy device on your local network talks to the iipzy service in the cloud. The iipzy device is a Nano Pi R4S computer running linux and iipzy software. Click ",l.a.createElement("b",null,"Download")," above for how to set up a NanoPi R4S. The iipzy device is known as ",l.a.createElement("b",null,"Sentinel"),"."),l.a.createElement("p",null,"To watch your network connection, Sentinel sends a heartbeat to the iipzy service every 20 seconds. If the service fails to receive a heartbeat for one minute, it assumes your internet connection is down. You are notified by a text message and email of this. When a heartbeat is again received, you are notified that the connection is up."),l.a.createElement("p",null,"To measure network latency, Sentinel sends a ping to an internet server every 5 seconds. You can view the ping latency on a graph so that you can see latency variations over time. Ping history is kept for 30 days. iipzy notifies you by email if one or more pings are dropped."),l.a.createElement("p",null,"To measure network throughput, Sentinel runs a speed test once a day, at about 1 am. You can also run the speed test on demand. You can view the history of the speed tests to see if your throughput is changing."),l.a.createElement("p",null,"Additionally, Sentinel keeps track of devices on your network. You can view info about the devices, such as ip address, name, and capabilities. iipzy notifies you via email if a new device appears on your network or if a device hasn't been seen for 30 days. You can optionally monitor a particular device so that you are notified by email if it goes offline or comes online.")))}}]),n}(l.a.Component);function I(e,t,n){console.log(n+" ["+t+"] "+e)}var U=n(24),L=n.n(U),j=n(165),W=n.n(j),R=L.a.create({httpsAgent:new W.a.Agent({keepAlive:!0}),validateStatus:function(e){return!0}});function M(e,t){console.log("(Exception) "+e+": "+t+", code = "+t.code);var n=p.a.httpStatusException;switch(t.code){case"ECONNREFUSED":n=p.a.httpStatusConnRefused;break;case"ECONNABORTED":n=p.a.httpStatusConnAborted;break;case"ECONNRESET":n=p.a.httpStatusConnReset;break;default:n=p.a.httpStatusConnRefused}return{status:n}}function D(){return(D=Object(r.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.delete(t,V(n));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",M("delete",e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function B(){return(B=Object(r.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--------------_get: url "+t),e.prev=1,e.next=4,R.get(t,V(n));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log("(Exception)--------------_get: ex "+e.t0.code),e.abrupt("return",M("get",e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function F(){return(F=Object(r.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--------------_post: url "+t),e.prev=1,e.next=4,R.post(t,n,V(a));case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),console.log("(Exception)--------------_post: ex "+e.t0.code),e.abrupt("return",M("post",e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function z(){return(z=Object(r.a)(o.a.mark((function e(t,n,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.put(t,n,V(a));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",M("put",e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function V(e){var t=e||{};return t.headers={},t.headers[p.a.httpCustomHeader_XTimestamp]=Date.now(),t.headers[p.a.httpCustomHeader_XWebClient]=1,L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken]&&(t.headers[p.a.httpCustomHeader_XAuthToken]=L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken]),L.a.defaults.headers.common[p.a.httpCustomHeader_XClientToken]&&(t.headers[p.a.httpCustomHeader_XClientToken]=L.a.defaults.headers.common[p.a.httpCustomHeader_XClientToken]),L.a.defaults.headers.common[p.a.httpCustomHeader_XConnToken]&&(t.headers[p.a.httpCustomHeader_XConnToken]=L.a.defaults.headers.common[p.a.httpCustomHeader_XConnToken]),t}var H={delete:function(e,t){return D.apply(this,arguments)},get:function(e,t){return B.apply(this,arguments)},post:function(e,t,n){return F.apply(this,arguments)},put:function(e,t,n){return z.apply(this,arguments)},logAuthToken:function(){console.log("authToken: "+L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken])},setAuthTokenHeader:function(e){console.log("setAuthTokenHeader = "+e),L.a.defaults.headers.common[p.a.httpCustomHeader_XAuthToken]=e},setBaseURL:function(e){L.a.defaults.baseURL="http://"+e+"/",console.log("setBaseURL = "+L.a.defaults.baseURL)},setClientTokenHeader:function(e){console.log("setClientTokenHeader = "+e),L.a.defaults.headers.common[p.a.httpCustomHeader_XClientToken]=e},setConnTokenHeader:function(e){console.log("setConnTokenHeader = "+e),L.a.defaults.headers.common[p.a.httpCustomHeader_XConnToken]=e}},q="address not set";function G(){return(G=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("users.init","clts","info"),q=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("addUser","user","info"),e.next=3,H.post("https://"+q+"/api/user",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("deleteUser","user","info"),e.next=3,H.delete("https://"+q+"/api/user");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("getUser","user","info"),e.next=3,H.get("https://"+q+"/api/user");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("newPassword","user","info"),e.next=3,H.post("https://"+q+"/api/user/newpassword",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("sendCode","user","info"),e.next=3,H.post("https://"+q+"/api/user/sendcode",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("updateUser","user","info"),e.next=3,H.put("https://"+q+"/api/user/user",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("verifyUser","user","info"),e.next=3,H.put("https://"+q+"/api/user/verify",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee={init:function(e){return G.apply(this,arguments)},final:function(){},addUser:function(e){return J.apply(this,arguments)},deleteUser:function(e){return X.apply(this,arguments)},getUser:function(){return Y.apply(this,arguments)},newPassword:function(e){return Z.apply(this,arguments)},sendPasswordResetCode:function(e){return K.apply(this,arguments)},updateUser:function(e){return Q.apply(this,arguments)},verifyUser:function(e){return $.apply(this,arguments)}},te=n(67),ne=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("SpinnerPopup.constructor"),Object(f.a)(a),a.state={count:0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("SpinnerPopup.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){return console.log("SpinnerPopup render"),l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{className:"popup_spinner"},l.a.createElement("div",{className:"popup_spinner_inner",alignItems:"center"},l.a.createElement("div",null,l.a.createElement(te.a,{animation:"border",role:"status"},l.a.createElement("span",{className:"sr-only"},"Loading..."))))))}}]),n}(l.a.Component),ae=n(31),oe=n(346),re=function(e){var t=e.type,n=e.name,a=e.label,o=e.value,r=e.error,i=e.autofocus,s=e.disabled,u=e.onChange,c=e.porportionalWidth?"85%":"480px";return l.a.createElement("div",{className:"form-group",style:{width:c,marginLeft:45}},l.a.createElement("label",{htmlFor:n},a),l.a.createElement("input",{autoFocus:i,disabled:s,value:o||"",onChange:u,id:n,name:n,type:t,className:"form-control"}),r&&l.a.createElement("div",{className:"alert alert-danger"},r))},ie=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={code:""},console.log("ValidationPopup.constructor"),a}return Object(h.a)(n,[{key:"getCode",value:function(){return this.state.code}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("ValidationPopup.handleChange: name = "+t+", value = "+this.state[t]),this.setState(Object(ae.a)({},t,n))}},{key:"handleSubmitClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ValidationPopup.handleSubmitClick"),console.log("code="+this.state.code),this.props.closePopup(),this.props.onSubmit(this.state.code);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleCancelClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ValidationPopup.handleCancelClick"),this.props.closePopup(),this.props.onSubmit("000000");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isValidInput",value:function(){return!0}},{key:"render",value:function(){var e=this;return console.log("ValidationPopup.render"),l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{className:"popup"},l.a.createElement("div",{className:"popup_inner"},l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Enter Validation Code")),l.a.createElement(re,{type:"text",autofocus:!0,disabled:!1,name:"code",value:this.getCode(),label:"Code",onChange:function(t){return e.handleChange(t)},error:"",porportionalWidth:!0}),l.a.createElement("h1",null,this.props.text),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.isValidInput(),style:{width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleSubmitClick(t)}},"Submit")),l.a.createElement(P,{onClick:function(t){return e.handleCancelClick(t)}}))))}}]),n}(l.a.Component),le=n(70),se=n(20),ue=n.n(se),ce=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("UserForm.constructor"),a.state={errors:{},count:0},a.data={userName:null,emailAddress:null,mobilePhoneNo:null,password:null,password2:null},Object(f.a)(a),a.schema={userName:ue.a.string().required().label("User Name").min(5).max(50),emailAddress:ue.a.string().required().label("Email Address").email(),mobilePhoneNo:ue.a.string().required().label("Mobile Phone Number").regex(/^\d{3}-\d{3}-\d{4}$/).error((function(e){return{message:"Phone number must be of the form 123-456-7890"}})),password:ue.a.string().required().label("Password").min(5).max(50),password2:ue.a.string().required().label("Password Again").min(5).max(50)},a}return Object(h.a)(n,[{key:"validateProperty",value:function(e,t){console.log("UserForm.validateProperty: name="+e+", value = "+t);var n=Object(ae.a)({},e,t),a=Object(ae.a)({},e,this.schema[e]),o=ue.a.validate(n,a).error;return console.log("UserForm.validateProperty - had error = "+o),o?o.details[0].message:null}},{key:"validate",value:function(){var e=ue.a.validate(this.data,this.schema,{abortEarly:!1}).error;if(!e)return null;console.log("UserForm.validate - had error");var t,n={},a=Object(le.a)(e.details);try{for(a.s();!(t=a.n()).done;){var o=t.value;n[o.path[0]]=o.message}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"componentDidMount",value:function(){console.log("UserForm.componentDidMount"),this.data=this.props.getUserData();var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("UserForm.componentWillUnmount"),this.props.setUserData(this.data),null}},{key:"isValidUserName",value:function(){return null!=this.data.userName&&this.data.userName.length>5}},{key:"isValidMobilePhoneNo",value:function(){return null!=this.data.mobilePhoneNo&&this.data.mobilePhoneNo.length>9}},{key:"isValidEmailAddress",value:function(){return null!=this.data.emailAddress&&this.data.emailAddress.length>5}},{key:"isValidPassword",value:function(){return null!=this.data.password&&this.data.password.length>5}},{key:"getButton1Label",value:function(){return this.props.button1Label}},{key:"getButton2Label",value:function(){return this.props.button2Label}},{key:"isValidInput",value:function(){return this.props.getButtonsEnabled()&&this.isValidUserName()&&this.isValidMobilePhoneNo()&&this.isValidEmailAddress()&&this.isValidPassword()&&this.data.password===this.data.password2}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("UserForm.handleChange: name = "+t+", value = "+this.data[t]);var a=this.state.errors,o=this.validateProperty(t,n);o?a[t]=o:delete a[t];var r=this.data;r[t]=n,this.setState({data:r,errors:a})}},{key:"handlePassword2Change",value:function(e){var t=e.target.name,n=e.target.value;if(console.log("UserForm.handlePassword2Change: name="+t+", value="+this.data[t]),this.data.password!==n){var a=this.state.errors;a[t]="passwords don't match";var o=this.data;return o[t]=n,void this.setState({data:o,errors:a})}return this.handleChange(e)}},{key:"handleButtonClick",value:function(e){console.log("UserForm.handleButtonClick"),console.log("userName="+this.data.userName),console.log("mobilePhoneNo="+this.data.mobilePhoneNo),console.log("emailAddress="+this.data.emailAddress),e.preventDefault();var t=this.validate();t&&console.log("UserForm.handleButtonClick: errors = "+Object.values(t)),this.setState({errors:t||{}}),t||(this.props.setButtonsEnabled(!1),this.props.setFieldsEnabled(!1),this.props.onSubmit(this.data))}},{key:"handleButton2Click",value:function(e){this.props.setButtonsEnabled(!1),this.props.setFieldsEnabled(!1),this.props.onSubmit2(this.data)}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=this.state.errors,s=this.data;this.handleChange;return l.a.createElement(re,{type:n,name:e,label:t,value:s[e],error:i[e],autofocus:a,disabled:o,onChange:r})}},{key:"render",value:function(){var e=this;console.log("UserForm.render");var t=this.props.getButtonsEnabled(),n=this.props.getFieldsEnabled(),a=this.props.onSubmit2?20:0,o=l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},this.props.title)),l.a.createElement("form",null,this.renderInput("userName","User Name","text",!0,this.props.userNameDisabled||!n,(function(t){return e.handleChange(t)})),this.renderInput("emailAddress","Email Address","text",!1,!this.isValidUserName()||!n,(function(t){return e.handleChange(t)})),this.renderInput("mobilePhoneNo","Mobile Phone Number","text",!1,!this.isValidEmailAddress()||!n,(function(t){return e.handleChange(t)})),this.renderInput("password","Password","password",!1,!this.isValidMobilePhoneNo()||!n,(function(t){return e.handleChange(t)})),this.renderInput("password2","Password Again","password",!1,!this.isValidPassword()||!n,(function(t){return e.handlePassword2Change(t)})),l.a.createElement("div",null,"\xa0"),l.a.createElement("div",{style:{marginLeft:"45px"}},l.a.createElement("table",{align:"left"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{textAlign:"center",marginRight:a}},l.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.isValidInput(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleButtonClick(t)}},this.getButton1Label()))),this.props.onSubmit2&&l.a.createElement("td",null,l.a.createElement("div",{style:{textAlign:"center",marginLeft:20}},l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!t,style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleButton2Click(t)}},this.getButton2Label())))))))));return console.log("<<<UserForm.render"),o}}]),n}(l.a.Component),de=null,pe=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("AddUserWindow.constructor"),a.state={count:0},de=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AddUserWindow.componentDidMount"),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("AddUserWindow.componentWillUnmount"),de=null}},{key:"componentWillReceiveProps",value:function(){console.log("AddUserWindow.componentWillReceiveProps")}},{key:"shouldComponentUpdate",value:function(e,t){return console.log("AddUserWindow.shouldComponentUpdate"),!0}},{key:"getUserData",value:function(){return{userName:n.userName,emailAddress:n.emailAddress,mobilePhoneNo:n.mobilePhoneNo,password:n.password,password2:n.password2}}},{key:"setUserData",value:function(e){n.userName=e.userName,n.emailAddress=e.emailAddress,n.mobilePhoneNo=e.mobilePhoneNo,n.password=e.password,n.password2=e.password2}},{key:"handleAddClick",value:function(e){console.log("AddUserWindow.handleAddClick"),console.log("  userName="+e.userName),console.log("  mobilePhoneNo="+e.mobilePhoneNo),console.log("  emailAddress="+e.emailAddress),n.userName=e.userName,n.mobilePhoneNo=e.mobilePhoneNo,n.emailAddress=e.emailAddress,n.password=e.password,n.password2=e.password,function(e){me.apply(this,arguments)}(e)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleInfoPopupClick",value:function(){console.log("AddUserWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,n.buttonsEnabled=!n.showValidationPopup,n.isVerified&&(k.send(p.a.ipcUserAddVerified,{userName:n.userName}),n.isVerified=!1),this.doRender()}},{key:"handleVerifyClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("AddUserWindow.handleVerifyClick, code"+t),"000000"!==t&&he({userId:n.userId,verificationCode:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"hideValidationCodePopup",value:function(){n.showValidationPopup=!1,n.buttonsEnabled=!0,this.doRender()}},{key:"getButtonsEnabled",value:function(){return console.log("addUserWindow.getButtonsEnabled: "+n.buttonsEnabled),n.buttonsEnabled}},{key:"setButtonsEnabled",value:function(e){n.buttonsEnabled=e,console.log("AddUserWindow.setButtonsEnabled: "+n.fieldsEnabled)}},{key:"getFieldsEnabled",value:function(){return console.log("addUserWindow.getFieldsEnabled: "+n.fieldsEnabled),n.fieldsEnabled}},{key:"setFieldsEnabled",value:function(e){n.fieldsEnabled=e,console.log("AddUserWindow.setFieldsEnabled: "+n.fieldsEnabled)}},{key:"doRender",value:function(){console.log("AddUserWindow.doRender"),this.setState({count:this.state.count+1})}},{key:"render",value:function(){var e=this;console.log("AddUserWindow.render");var t=n.showInfoPopup,a=n.showSpinner,o=n.showValidationPopup;console.log("AddUserWindow.render: showInfoPopup = "+t),console.log("AddUserWindow.render: showSpinner = "+a),console.log("AddUserWindow.render: showValidationPopup = "+o);var r=l.a.createElement("div",null,o&&l.a.createElement(ie,{onSubmit:function(t){return e.handleVerifyClick(t)},closePopup:this.hideValidationCodePopup.bind(this)}),t&&l.a.createElement(x,{title:"Register User",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),a&&l.a.createElement(ne,null),l.a.createElement(ce,{title:"Register User @ iipzy.com",getUserData:this.getUserData,setUserData:this.setUserData,getButtonsEnabled:this.getButtonsEnabled,setButtonsEnabled:this.setButtonsEnabled,getFieldsEnabled:this.getFieldsEnabled,setFieldsEnabled:this.setFieldsEnabled,userNameDisabled:!1,button1Label:"Register",onSubmit:function(t){return e.handleAddClick(t)}}));return console.log("<<<AddUserWindow.render"),r}}]),n}(ce);function me(){return(me=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("AddUserWindow.addUser"),pe.showSpinner=!0,de&&de.doRender(),e.next=5,ee.addUser(t);case 5:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=17;break}return console.log("addUserWindow.handleUserAddResponse: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),pe.infoMessage=a.__hadError__.errorMessage,pe.showInfoPopup=!0,pe.showSpinner=!1,pe.buttonsEnabled=!1,pe.fieldsEnabled=!0,de&&de.doRender(),e.abrupt("return");case 17:pe.userId=a.userId,console.log("AddUserWindow.addUser: userId = "+pe.userId),pe.showSpinner=!1,pe.showValidationPopup=!0,pe.buttonsEnabled=!1,pe.fieldsEnabled=!0,de&&de.doRender();case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe.showSpinner=!0,de&&de.doRender(),e.next=4,ee.verifyUser(t);case 4:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=16;break}return console.log("AddUserWindow.handleUserVerifyResponse: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),pe.infoMessage=a.__hadError__.errorMessage,pe.showInfoPopup=!0,pe.buttonsEnabled=!1,pe.showSpinner=!1,pe.showValidationPopup=!0,de&&de.doRender(),e.abrupt("return");case 16:console.log("AddUserWindow.handleUserVerifyResponse: isVerified = "+a.isVerified),pe.showValidationPopup=!1,pe.infoMessage=pe.userName+" registered",pe.showInfoPopup=!0,pe.buttonsEnabled=!1,pe.fieldsEnabled=!0,pe.showSpinner=!1,pe.isVerified=!0,de&&de.doRender();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}pe.userName="",pe.emailAddress="",pe.mobilePhoneNo="",pe.password="",pe.password2="",pe.needRegistration=!1,pe.buttonsEnabled=!0,pe.fieldsEnabled=!0,pe.showInfoPopup=!1,pe.infoMessage="",pe.showSpinner=!1,pe.showValidationPopup=!1,pe.userId=0,pe.isVerified=!1;var ge=pe,be=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("AdminNavigatorWindow.constructor"),a.state={count:0},Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("AdminNavigatorWindow.componentDidMount"),k.send(p.a.ipcShowNavBar,"admin"),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("AdminNavigatorWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){this.setState({count:this.state.count+1})}},{key:"render",value:function(){return console.log("AdminNavigatorWindow.render"),l.a.createElement("div",null,l.a.createElement(T,null))}}]),n}(l.a.Component),ve=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("BlankWindow.constructor"),a.state={count:0},Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("BlankWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("BlankWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){return console.log("BlankWindow.render"),l.a.createElement("div",null,l.a.createElement(T,null))}}]),n}(l.a.Component),ke="address not set";function we(){return(we=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("clients.init","clts","info"),ke=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(){return(ye=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("getClients","clts","info"),n="https://"+ke+"/api/client",t&&(n+="?"+t),e.next=5,H.get(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ee={init:function(e){return we.apply(this,arguments)},final:function(){},getClients:function(e){return ye.apply(this,arguments)}},Ce=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"render",value:function(){for(var e=this.props.versionInfo,t=new Map,n=0;n<e.length;n++)t.set(e[n].moduleName,e[n]);return console.log("VersionTable render: versionInfoByModuleName="+JSON.stringify(t,null,2)),l.a.createElement("table",{id:"version-table"},t.map((function(e){return l.a.createElement("tr",{key:e.moduleName},l.a.createElement("td",null,l.a.createElement("div",{style:{textAlign:"left",marginLeft:20}},e.moduleName)),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",null,e.updateTime),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",null,e.version),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",null,e.sharedVersion))})))}}]),n}(l.a.Component),Se=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),Object(f.a)(a),a.state={count:0},n.client=JSON.parse(JSON.stringify(a.props.getClient())),console.log("ClientPopup.constructor - client: "+JSON.stringify(n.client,null,2)),n.title="Client @"+n.client.clientToken,Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("ClientPopup componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("ClientPopup componentWillUnmount"),null}},{key:"handleCloseClick",value:function(e){console.log("...ClientPopup handleCloseClick"),this.props.closePopup(),this.props.onClose(e)}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleCopyClientTokenClick",value:function(e){console.log("...ClientPopup.handleCopyClientTokenClick"),navigator.clipboard.writeText(n.client.clientToken).then((function(){})).catch((function(e){console.log("Something went wrong",e)}))}},{key:"render",value:function(){var e=this;console.log("ClientPopup render");var t=n.client,a="appliance"===t.clientType;return l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{className:"popup"},l.a.createElement("div",{className:"popup_inner_600x500"},l.a.createElement("div",null,l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},t.clientName)),l.a.createElement("table",{align:"center"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Name:"),l.a.createElement("td",null,t.clientName)),l.a.createElement("tr",null,l.a.createElement("td",null,"Client Token:"),l.a.createElement("td",null,t.clientToken),l.a.createElement("td",null,"\xa0\xa0"),l.a.createElement("td",null,l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!1,size:"small",style:{width:"50px",height:"25px",color:"#0000b0"},onClick:function(t){return e.handleCopyClientTokenClick(t)}},"Copy"))),t.clientType?l.a.createElement("tr",null,l.a.createElement("td",null,"Client Type:"),l.a.createElement("td",null,"pc"===t.clientType?"pc":"Sentinel")):null,t.publicIPAddress?l.a.createElement("tr",null,l.a.createElement("td",null,"Public Address:"),l.a.createElement("td",null,t.publicIPAddress.substring(7))):null,t.localIPAddress?l.a.createElement("tr",null,l.a.createElement("td",null,"Local Address:"),l.a.createElement("td",null,t.localIPAddress)):null,t.userName?l.a.createElement("tr",null,l.a.createElement("td",null,"User Name:"),l.a.createElement("td",null,t.userName)):null,t.ispName?l.a.createElement("tr",null,l.a.createElement("td",null,"ISP:"),l.a.createElement("td",null,t.ispName)):null,l.a.createElement("tr",null,l.a.createElement("td",null,"On Line:"),l.a.createElement("td",null,t.isOnLine?"Yes":"No")),l.a.createElement("tr",null,l.a.createElement("td",null,"Logged In:"),l.a.createElement("td",null,t.isLoggedIn?"Yes":"No")),l.a.createElement("tr",null,l.a.createElement("td",null,"Iperf3 Count:"),l.a.createElement("td",null,t.iperf3UseCountDaily)),a&&l.a.createElement("div",{style:{marginLeft:20,border:"1px solid #ccc",font:"14px Courier New",fontWeight:"bold",overflowY:"scroll"}},l.a.createElement(Ce,{versionInfo:t.versionInfo,onClick:function(t){return e.handleClientTokenClick(t)}}))))),l.a.createElement(P,{onClick:function(t){return e.handleCloseClick(t)}}))))}}]),n}(l.a.Component);Se.client=null,Se.title="Client";var _e=Se,Pe=(l.a.Component,function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.clients;return console.log("ClientTable render"),console.log(t),l.a.createElement("table",{id:"client-table"},t&&t.map((function(t){return l.a.createElement("tr",{key:t.clientToken},l.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},l.a.createElement("div",{style:{textAlign:"left",marginLeft:20}},t.clientName)),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},t.userName),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},t.publicIPAddress.substring(7)),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:"pointer"},onClick:function(){return e.props.onClick(t.clientToken)}},t.localIPAddress),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t.clientToken)}},t.isOnLine?"":"off line"),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:t.userId?"pointer":"default"},onClick:function(){return e.props.onClick(t.clientToken)}},t.userId?"":"not registered"))})))}}]),n}(l.a.Component)),xe=null,Ne=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("ClientsWindow.constructor"),a.state={count:0},xe=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ClientsWindow.componentDidMount"),Ae("");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("ClientsWindow.componentWillUnmount"),xe=null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"handleClientTokenClick",value:function(e){console.log("ClientsWindow.clientTokenClick = "+e),n.clientToken=e,n.showClientPopup=!0,this.doRender()}},{key:"handleClientCloseClick",value:function(){console.log("ClientsWindow.handleClientCloseClick")}},{key:"hideClientPopup",value:function(){n.showClientPopup=!1,this.doRender()}},{key:"getClient",value:function(){return console.log("ClientsWindow.getClient"),n.clientByClientToken.get(n.clientToken)}},{key:"render",value:function(){var e=this;console.log("ClientsWindow.render");var t=n.clients,a=n.showClientPopup;return l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Clients")),a?l.a.createElement(_e,{getClient:function(){return e.getClient()},onClose:function(t){return e.handleClientCloseClick(t)},closePopup:this.hideClientPopup.bind(this)}):null,l.a.createElement("div",{style:{marginLeft:20,border:"1px solid #ccc",font:"14px Courier New",fontWeight:"bold",overflowY:"scroll"}},l.a.createElement(Pe,{clients:t,onClick:function(t){return e.handleClientTokenClick(t)}})))}}]),n}(l.a.Component);function Ae(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(r.a)(o.a.mark((function e(t){var n,a,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getClients(t);case 2:if(n=e.sent,a=n.data,r=n.status,console.log("ClientsWindow.getClientsFromDB (response): status = "+r),!a.__hadError__){e.next=11;break}return console.log("ClientsWindow.getClientsFromDB: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Ne.infoMessage=a.__hadError__.errorMessage,xe&&xe.doRender(),e.abrupt("return");case 11:for(Ne.clients=a,Ne.clientByClientToken=new Map,i=0;i<Ne.clients.length;i++)l=Ne.clients[i],Ne.clientByClientToken.set(l.clientToken,l);xe&&xe.doRender();case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Ne.clients=null,Ne.clientByClientToken=new Map,Ne.clientToken="",Ne.infoMessage="",Ne.showClientPopup=!1;var Oe=Ne,Ie=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("DownloadWindow.constructor"),a.state={count:0},Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("DownloadWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("DownloadWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){return console.log("DownloadWindow.render"),l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Download iipzy Sentinel Nano Pi R4S Image")),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left",fontWeight:"normal"}},l.a.createElement("p",null,"You'll need a NanoPi R4S with 4GB (or more) of memory and an 8 GB (or larger) Micro SD Memory Card. ",l.a.createElement("br",null),l.a.createElement("br",null),"The NanoPi R4S can be found at"," ",l.a.createElement("a",{href:"https://www.amazon.com/FriendlyElec-OpenWRT-Dual-Gbps-Ethernet-Gateway/dp/B08PV4228F/ref=sxts_rp_s_a_1_0?content-id=amzn1.sym.3432eb1a-1558-4445-9430-9bb3e7f7b9b7%3Aamzn1.sym.3432eb1a-1558-4445-9430-9bb3e7f7b9b7&crid=30OJGJPB4KYEQ&cv_ct_cx=nanopi%2Br4s&keywords=nanopi%2Br4s&pd_rd_i=B08PV4228F&pd_rd_r=4f14af91-d9b7-4809-a181-4382d2cc190e&pd_rd_w=z6Fcw&pd_rd_wg=4uEXm&pf_rd_p=3432eb1a-1558-4445-9430-9bb3e7f7b9b7&pf_rd_r=SNZJW1ZHJW7CP6K9EHRV&qid=1683063967&sbo=RZvfv%2F%2FHxDF%2BO5021pAnSA%3D%3D&sprefix=nanopi%2Br4s%2Caps%2C135&sr=1-1-5985efba-8948-4f09-9122-d605505c9d1e&ufe=app_do%3Aamzn1.fos.18ed3cb5-28d5-4975-8bc7-93deae8f9840&th=1"},"here"),l.a.createElement("br",null),l.a.createElement("br",null),"You'll also need a power supply.  A good choice is"," ",l.a.createElement("a",{href:"https://www.amazon.com/CanaKit-Raspberry-Power-Supply-USB-C/dp/B07TYQRXTK/ref=pd_bxgy_vft_none_sccl_1/145-5946572-5530057?pd_rd_w=Hci82&content-id=amzn1.sym.26a5c67f-1a30-486b-bb90-b523ad38d5a0&pf_rd_p=26a5c67f-1a30-486b-bb90-b523ad38d5a0&pf_rd_r=HJDVY0011YS55XSD4DT3&pd_rd_wg=i0zEH&pd_rd_r=ddd24b26-2410-4359-b5ba-7dc5b2ccb416&pd_rd_i=B07TYQRXTK&psc=1"},"here"),l.a.createElement("br",null),l.a.createElement("br",null),"A good choice for a Micro SD Card is"," ",l.a.createElement("a",{href:"https://www.amazon.com/Transcend-MicroSDHC-Memory-Adapter-TS8GUSDU1/dp/B00BDS426G/ref=sr_1_1?crid=20GSBJO9DI9GY&keywords=transcend+8gb+micro+sd+card&qid=1683064793&sprefix=transcend+8gb+micro+sd+card%2Cspecialty-aps%2C122&sr=8-1"},"here"),l.a.createElement("br",null),l.a.createElement("br",null),"Download the Sentinel NanoPi R4s image"," ",l.a.createElement("a",{href:"https://iipzy.net:8001/api/clientupdate//bacec2a221264e32bdc3aa886e80a1b1"},"here"),l.a.createElement("br",null),l.a.createElement("br",null),"I recommend you use balenaEtcher to burn the Sentinel NanoPi R4S image to the Micro SD Card.",l.a.createElement("br",null),"You can find balanaEtcher"," ",l.a.createElement("a",{href:"https://www.balena.io/etcher/"},"here"),l.a.createElement("br",null),l.a.createElement("br",null),"Install the Micro SD Card with the image into the NanoPi R4S. \xa0\xa0 Connect the NanoPi to the power supply.\xa0\xa0The red PWR led, that can be seen from the top, will light if power is on.\xa0\xa0Connect the Nano Pi to your local network.\xa0\xa0The iipzy Sentinel will then connect to the iipzy service.\xa0\xa0Once you have registered and logged in, you can connect to the iipzy Sentinel by clicking on ",l.a.createElement("strong",null,"Sentinel")," above.")))}}]),n}(l.a.Component),Ue=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("PasswordPopup.constructor"),a.state={password:""},Object(f.a)(a),a}return Object(h.a)(n,[{key:"getPassword",value:function(){return this.state.password}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("PasswordPopup.name="+t+", value="+this.state[t]),this.setState(Object(ae.a)({},t,n))}},{key:"handleCloseClick",value:function(e){console.log("PasswordPopup.handleCloseClick"),this.props.onSubmit(""),this.props.closePopup(),this.state.password=""}},{key:"handleSubmitClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.onSubmit(this.state.password),this.props.closePopup(),this.state.password="";case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isValidInput",value:function(){return!0}},{key:"render",value:function(){var e=this;return console.log("PasswordPopup render"),l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{className:"popup"},l.a.createElement("div",{className:"popup_inner"},l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Enter Password")),l.a.createElement("form",null,l.a.createElement(re,{type:"password",autofocus:!0,disabled:!1,name:"password",value:this.getPassword(),label:"Password",onChange:function(t){return e.handleChange(t)},error:"",porportionalWidth:!0}),l.a.createElement("h1",null,this.props.text),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.isValidInput(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t)}},"Submit")),l.a.createElement(P,{onClick:function(t){return e.handleCloseClick(t)}})))))}}]),n}(l.a.Component),Le=null,je=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("EditUserWindow.constructor"),a.windowTitle="Update User @ iipzy.com",a.userId=0,Le=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("EditUserWindow.componentDidMount"),n.buttonsEnabled=!1,n.fieldsEnabled=!0,n.showPasswordPopup=!0,n.passwordValidated=!1;var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("EditUserWindow.componentWillUnmount"),Le=null}},{key:"getUserData",value:function(){var e={userName:n.userName,emailAddress:n.emailAddress,mobilePhoneNo:n.mobilePhoneNo,password:n.password,password2:n.password2};return console.log("EditUserWindow.getUserData: "+JSON.stringify(e)),console.log("EditUserWindow.getUserData: emailAddress = "+e.emailAddress),e}},{key:"setUserData",value:function(e){console.log("EditUserWindow.setUserData: emailAddress = "+e.emailAddress),n.userName=e.userName,n.emailAddress=e.emailAddress,n.mobilePhoneNo=e.mobilePhoneNo,n.password=e.password,n.password2=e.password2}},{key:"getButtonsEnabled",value:function(){return console.log("EditUserWindow.getButtonsEnabled: "+n.buttonsEnabled),n.buttonsEnabled}},{key:"setButtonsEnabled",value:function(e){n.buttonsEnabled=e,console.log("EditUserWindow.setButtonsEnabled: "+n.buttonsEnabled)}},{key:"getFieldsEnabled",value:function(){return console.log("EditUserWindow.getFieldsEnabled: "+n.fieldsEnabled),n.fieldsEnabled}},{key:"setFieldsEnabled",value:function(e){n.fieldsEnabled=e,console.log("EditUserWindow.setFieldsEnabled: "+n.fieldsEnabled)}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"handleUpdateClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("EditUserWindow.handleUpdateClick"),console.log("userName="+t.userName),console.log("mobilePhoneNo="+t.mobilePhoneNo),console.log("emailAddress="+t.emailAddress),Me(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeleteClick",value:function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("EditUserWindow handleDeleteClick"),We(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleLoginClick",value:function(e){console.log("...handleLoginClick"),k.send(p.a.ipcLinkTo,p.a.urlLogin)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleInfoPopupClick",value:function(){console.log("...EditUserWindowhandleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,n.buttonsEnabled=!0,n.fieldsEnabled=!0,this.doRender()}},{key:"handlePasswordPopupClick",value:function(e){e===n.password?(console.log("...handlePasswordPopupClick: password match"),n.passwordValidated=!0,n.passwordSupplied=!0):e||(console.log("...handlePasswordPopupClick: password empty"),n.passwordValidated=!1,n.passwordSupplied=!1)}},{key:"hidePasswordPopup",value:function(){console.log("...hidePasswordPopup"),n.passwordValidated?(n.showPasswordPopup=!1,n.buttonsEnabled=!0):n.passwordSupplied||(n.showPasswordPopup=!1,n.buttonsEnabled=!1),n.fieldsEnabled=!0,this.doRender()}},{key:"render",value:function(){var e=this,t=n.isLoggedIn;console.log("EditUserWindow.render: isLoggedIn = "+t);var a=n.passwordSupplied,o=n.showInfoPopup,r=n.showPasswordPopup,i=n.showSpinner;return l.a.createElement("div",null,t&&r&&l.a.createElement(Ue,{onSubmit:function(t){return e.handlePasswordPopupClick(t)},closePopup:this.hidePasswordPopup.bind(this)}),o&&l.a.createElement(x,{title:"Edit User",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),i&&l.a.createElement(ne,null),!t&&!o&&l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},this.windowTitle)),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"You must be logged in to edit your user settings"),l.a.createElement(oe.a,{type:"button",variant:"contained",style:{width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleLoginClick(t)}},"Login"))),t&&!r&&a&&l.a.createElement(ce,{title:this.windowTitle,getUserData:this.getUserData,setUserData:this.setUserData,getButtonsEnabled:this.getButtonsEnabled,setButtonsEnabled:this.setButtonsEnabled,getFieldsEnabled:this.getFieldsEnabled,setFieldsEnabled:this.setFieldsEnabled,userNameDisabled:!0,button1Label:"Update",onSubmit:function(t){return e.handleUpdateClick(t)},button2Label:"Delete",onSubmit2:function(t){return e.handleDeleteClick(t)}}))}}]),n}(ce);function We(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je.showSpinner=!0,Le&&Le.doRender(),e.next=4,ee.deleteUser(t);case 4:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=16;break}return console.log("EditUserWindow.deleteUser: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),je.buttonsEnabled=!1,je.fieldsEnabled=!0,je.infoMessage=a.__hadError__.errorMessage,je.showInfoPopup=!0,je.showSpinner=!0,Le&&Le.doRender(),e.abrupt("return");case 16:k.send(p.a.ipcSubmitLogout,{userName:je.userName,authToken:je.authToken}),je.buttonsEnabled=!1,je.fieldsEnabled=!0,je.infoMessage=je.userName+" deleted",je.showInfoPopup=!0,je.showSpinner=!1,je.userId=0,je.userName="",je.emailAddress="",je.mobilePhoneNo="",je.password="",je.password2="",je.isAdmin=!1,je.isLoggedIn=!1,je.authToken="",Le&&Le.doRender();case 32:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return De.apply(this,arguments)}function De(){return(De=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return je.showSpinner=!0,Le&&Le.doRender(),e.next=4,ee.updateUser(t);case 4:if(n=e.sent,a=n.data,n.status,!a.__hadError__){e.next=16;break}return console.log("EditUserWindow.updateUser: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),je.buttonsEnabled=!1,je.fieldsEnabled=!0,je.infoMessage=a.__hadError__.errorMessage,je.showInfoPopup=!0,je.showSpinner=!1,Le&&Le.doRender(),e.abrupt("return");case 16:je.mobilePhoneNo=t.mobilePhoneNo,je.emailAddress=t.emailAddress,je.password=t.password,je.buttonsEnabled=!1,je.fieldsEnabled=!0,je.infoMessage=je.userName+" updated",je.showInfoPopup=!0,je.showSpinner=!1,Le&&Le.doRender();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}je.userName="",je.emailAddress="",je.mobilePhoneNo="",je.password="",je.password2="",je.userId=0,je.isAdmin=!1,je.isLoggedIn=!1,je.authToken="",je.infoMessage="",je.showInfoPopup=!1,je.showPasswordPopup=!0,je.showSpinner=!1,je.passwordSupplied=!1,je.passwordValidated=!1,je.buttonsEnabled=!1,je.fieldsEnabled=!0;var Be=function(){var e=Object(r.a)(o.a.mark((function e(t,n){var a,r,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.userName,r=n.authToken,i=n.password,l=n.loginStatus,console.log("EditUserWindow.handleLoginStatus: userName = "+a+", loginStatus = "+l),je.userName=a,je.password=i,je.password2=i,je.isLoggedIn=l===p.a.loginStatusLoggedIn,je.authToken=r,!je.isLoggedIn||je.emailAddress){e.next=10;break}return e.next=10,Fe();case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Fe(){return ze.apply(this,arguments)}function ze(){return(ze=Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.getUser();case 2:t=e.sent,n=t.data,t.status,console.log("EditUserWindow.handleUserGetResponse: emailAddress = "+n.emailAddress+", mph = "+n.mobilePhoneNo),je.userId=n.userId,je.emailAddress=n.emailAddress,je.mobilePhoneNo=n.mobilePhoneNo,je.isAdmin=n.isAdmin,Le&&Le.doRender();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k.on(p.a.ipcLoginStatus,Be);var Ve=je,He=null,qe=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("ForgotPasswordWindow.constructor"),a.state={update:!1,errors:{},count:0},a.data={userName:null,passwordResetCode:null,password:null,password2:null},He=Object(f.a)(a),a.schema={userName:ue.a.string().required().label("User Name").min(5).max(50),passwordResetCode:ue.a.string().required().label("Password Reset Code").min(6).max(6),password:ue.a.string().required().label("Password").min(5).max(50),password2:ue.a.string().required().label("Password Again").min(5).max(50)},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("forgotPasswordWindow componentDidMount"),this.data.userName=n.userName,this.data.passwordResetCode=n.passwordResetCode,this.data.password=n.password,this.data.password2=n.password2,this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("forgotPasswordWindow componentWillUnmount"),n.userName=this.data.userName,n.passwordResetCode=this.data.passwordResetCode,n.password=this.data.password,n.password2=this.data.password2,He=null}},{key:"validateProperty",value:function(e,t){console.log("...validateProperty: name="+e+", value = "+t);var n=Object(ae.a)({},e,t),a=Object(ae.a)({},e,this.schema[e]),o=ue.a.validate(n,a).error;return console.log("...validateProperty - had error = "+o),o?o.details[0].message:null}},{key:"validate",value:function(){var e=ue.a.validate(this.data,this.schema,{abortEarly:!1}).error;if(!e)return null;console.log("...validate - had error");var t,n={},a=Object(le.a)(e.details);try{for(a.s();!(t=a.n()).done;){var o=t.value;n[o.path[0]]=o.message}}catch(r){a.e(r)}finally{a.f()}return n}},{key:"handleChange",value:function(e){var t=e.target.name,n=e.target.value;console.log("name="+t+", value="+this.data[t]);var a=this.state.errors,o=this.validateProperty(t,n);o?a[t]=o:delete a[t];var r=this.data;r[t]=n,this.setState({data:r,errors:a})}},{key:"handleClearClck",value:function(e){n.userName="",n.passwordResetCode="",n.password="",n.password2="",n.showGetCodeResponsePopup=!1,n.getCodeResponseMessage="",n.showSubmitResponsePopup=!1,n.getSubmitResponseMessage="",n.inputsEnabled=!0,n.buttonsEnabled=!0,n.submitButtonEnabled=!1,n.codeSent=!1,this.componentDidMount()}},{key:"handleGetCodeClick",value:function(e){console.log("...ForgotPasswordWindow handleGetCodeClick"),console.log("userName="+this.data.userName),function(e){Ge.apply(this,arguments)}({userName:this.data.userName})}},{key:"handlePassword2Change",value:function(e){var t=e.target.name,n=e.target.value;if(console.log("name="+t+", value="+this.data[t]),this.data.password!==n){var a=this.state.errors;a[t]="passwords don't match";var o=this.data;return o[t]=n,void this.setState({data:o,errors:a})}return this.handleChange(e)}},{key:"handleSubmitClick",value:function(e){console.log("...ForgotPasswordWindow handleSubmitClick"),console.log("userName="+this.data.userName),console.log("masswordResetCode="+this.data.passwordResetCode),e.preventDefault();var t=this.validate();t&&console.log("...handleSubmitClick: errors = "+Object.values(t)),this.setState({errors:t||{}}),t||function(e){Je.apply(this,arguments)}({userName:this.data.userName,passwordResetCode:this.data.passwordResetCode,password:this.data.password})}},{key:"isValidInput",value:function(){return this.isValidUserName()&&this.isValidPasswordResetCode()&&this.isValidPassword()&&this.data.password===this.data.password2}},{key:"isValidUserName",value:function(){return null!=this.data.userName&&this.data.userName.length>5}},{key:"codeSent",value:function(){return n.codeSent}},{key:"isValidPasswordResetCode",value:function(){return null!=this.data.passwordResetCode&&6===this.data.passwordResetCode.length}},{key:"isValidPassword",value:function(){return null!=this.data.password&&this.data.password.length>5}},{key:"renderInput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=this.state.errors,s=this.data;console.log("ForgotPasswordWindow.renderInput: name="+e+", value="+s[e]);this.handleChange;return l.a.createElement(re,{type:n,name:e,label:t,value:s[e],error:i[e],autofocus:a,disabled:o,onChange:r})}},{key:"getResponseMessage",value:function(){return n.responseMessage}},{key:"handleResponsePopupClick",value:function(){console.log("...ForgotPasswordWindowhandleInfoPopupClick")}},{key:"hideResponsePopup",value:function(){n.showResponsePopup=!1,n.buttonsEnabled=!0,this.doRender()}},{key:"doRender",value:function(e,t){e&&t&&(this.data[e]=t),this.setState({count:this.state.count+1})}},{key:"render",value:function(){var e=this;console.log("forgotPasswordWindow.render");var t=n.inputsEnabled,a=n.buttonsEnabled,o=n.showResponsePopup,r=n.showSpinner,i=n.submitButtonEnabled;return l.a.createElement("div",null,l.a.createElement(T,null),r&&l.a.createElement(ne,null),o&&l.a.createElement(x,{title:"Forgot Password",getInfoMessage:function(){return e.getResponseMessage()},onSubmit:function(t){return e.handleResponsePopupClick(t)},closePopup:this.hideResponsePopup.bind(this)}),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Forgot Password")),l.a.createElement("div",{style:{textAlign:"left",fontWeight:"normal"}},l.a.createElement("p",null,'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa01. Enter your User Name then click the "Get Code" button below.',l.a.createElement("br",null)," \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa02. A Password Reset Code will be sent to the user's email address.",l.a.createElement("br",null),'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa03. Enter the code and the new password (twice), then click the "Submit" button.')),l.a.createElement("form",null,this.renderInput("userName","User Name","text",!0,!t||this.codeSent(),(function(t){return e.handleChange(t)})),this.renderInput("passwordResetCode","Password Reset Code","text",!1,!t||!this.isValidUserName()||!this.codeSent(),(function(t){return e.handleChange(t)})),this.renderInput("password","Password","password",!1,!t||!this.isValidPasswordResetCode(),(function(t){return e.handleChange(t)})),this.renderInput("password2","Password Again","password",!1,!t||!this.isValidPassword(),(function(t){return e.handlePassword2Change(t)})),l.a.createElement("div",null,"\xa0"),l.a.createElement("div",{style:{marginLeft:"45px"}},l.a.createElement("table",{align:"left"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!a||!this.isValidUserName()||this.isValidPasswordResetCode(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleGetCodeClick(t)}},"Get Code"))),l.a.createElement("td",null,l.a.createElement("div",{style:{textAlign:"center",marginLeft:40,marginRight:40}},l.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!a||!this.isValidInput()||!i,style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t)}},"Submit"))),l.a.createElement("td",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!a,style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleClearClck(t)}},"Clear")))))))))}}]),n}(l.a.Component);function Ge(){return(Ge=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.buttonsEnabled=!1,qe.showSpinner=!0,He&&He.doRender(),e.next=5,ee.sendPasswordResetCode(t);case 5:n=e.sent,a=n.data,n.status,a.__hadError__?(console.log("ForgotPasswordWindow.getResetCode: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),qe.responseMessage=a.__hadError__.errorMessage):(qe.responseMessage="Password Reset Code has been sent to user "+qe.userName,qe.codeSent=!0,qe.submitButtonEnabled=!0),qe.buttonsEnabled=!0,qe.showResponsePopup=!0,qe.showSpinner=!1,He&&He.doRender();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qe.buttonsEnabled=!1,qe.showSpinner=!0,He&&He.doRender(),e.next=5,ee.newPassword(t);case 5:n=e.sent,a=n.data,n.status,a.__hadError__?(console.log("ForgotPasswordWindow.updatePassword: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),qe.responseMessage=a.__hadError__.errorMessage):(qe.responseMessage="Password has been changed for user "+qe.userName,qe.inputsEnabled=!1,qe.submitButtonEnabled=!1),qe.buttonsEnabled=!0,qe.showResponsePopup=!0,qe.showSpinner=!1,He&&He.doRender();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}qe.userName="",qe.passwordResetCode="",qe.password="",qe.password2="",qe.showResponsePopup=!1,qe.responseMessage="",qe.buttonsEnabled=!0,qe.inputsEnabled=!0,qe.submitButtonEnabled=!1,qe.showSpinner=!1,qe.codeSent=!1;k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.userName;console.log("ForgotPasswordWindow.handleLoginStatus: userName "+n),qe.userName=n,null!=He&&He.doRender("userName",n)}));var Xe=qe,Ye=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("HomeNavigatorWindow.constructor"),a.state={count:0},Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("HomeNavigatorWindow.componentDidMount"),k.send(p.a.ipcShowNavBar,"home"),k.send(p.a.ipcLinkTo,p.a.urlIipzy),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("HomeNavigatorWindow.componentWillUnmount"),null}},{key:"doRender",value:function(){this.state.count;this.setState({count:this.state.count+1})}},{key:"render",value:function(){return console.log("HomeNavigatorWindow.render"),l.a.createElement("div",null,l.a.createElement(T,null))}}]),n}(l.a.Component),Ze=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("IipzyWindow.constructor"),a.state={count:0},Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("IipzyWindow.componentDidMount");var e=this.state.count+1;this.setState({count:e})}},{key:"componentWillUnmount",value:function(){console.log("IipzyWindow.componentWillUnmount"),null}},{key:"handleSentinelClick",value:function(){console.log("IIpzyWindow.handleSentinelClick"),k.send(p.a.ipcLinkTo,p.a.urlSentinels)}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){var e=this;return console.log("IipzyWindow.render"),l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Welcome to the iipzy service")),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left",fontWeight:"normal"}},l.a.createElement("p",null,"Click on"," ",l.a.createElement("button",{class:"invisible-button",onClick:function(t){return e.handleSentinelClick(t)}},l.a.createElement("strong",null,"Sentinel"))," ","above to connect to your iipzy Sentinel device.",l.a.createElement("br",null),l.a.createElement("br",null),"From Sentinel, you can view your network latency, results of the most recent speed test, and a list of the devices on your network.")))}}]),n}(l.a.Component),Ke=n(51),Qe=n(93),$e=n.n(Qe);var et={get:function(e){var t=$e.a.get(e);return I("cookie.get: key = "+e+", val = "+t,"cook","info"),t},set:function(e,t){return I("cookie.set: key = "+e+", val = "+t,"cook","info"),$e.a.set(e,t)}},tt="address not set";function nt(){return(nt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I("auth.init","auth","info"),tt=t,I("auth.init: userName="+(n=et.get("userName")),"auth","info"),null==n){e.next=8;break}if(!et.get("password")){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("sendLogin","auth","info"),e.next=3,H.post("https://"+tt+"/api/auth/login",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(){return it.apply(this,arguments)}function it(){return(it=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("sendLogout","auth","info"),e.next=3,H.post("https://"+tt+"/api/auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){return(lt=Object(r.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I("auth.login","auth","info"),I("userName="+(t=et.get("userName")),"auth","info"),null==t){e.next=10;break}if(null==(n=et.get("password"))){e.next=10;break}return a=Object(Ke.a)(n),e.next=9,ct(t,a);case 9:return e.abrupt("return",e.sent);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("submitLoginRequest","auth","info"),n=t.userName,a=t.password,e.next=4,ct(n,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(){return(ut=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("submitLogoutRequest","auth","info"),n=t.userName,e.next=4,pt(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t){return dt.apply(this,arguments)}function dt(){return(dt=Object(r.a)(o.a.mark((function e(t,n){var a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(">>>loginAsync","auth","info"),e.next=3,at({userName:t,password:n});case 3:if(a=e.sent,r=a.data,I("loginAsync: status = "+(i=a.status),"auth","info"),i!==p.a.httpStatusOk){e.next=13;break}return I("loginAsync: succeeded","auth","info"),e.next=11,ht(t,n,r.authToken,r.isLoggedIn?p.a.loginStatusLoggedIn:p.a.loginStatusLoginFailed,r.isAdmin);case 11:e.next=16;break;case 13:return I("loginAsync: failed","auth","info"),e.next=16,ht(t,"","",p.a.loginStatusLoginFailed,!1);case 16:return I("<<<loginAsync","auth","info"),e.abrupt("return",{data:r,status:i});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(r.a)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(">>>logoutAsync","auth","info"),e.next=3,rt();case 3:if(n=e.sent,a=n.data,I("logoutAsync: status = "+(r=n.status),"auth","info"),r!==p.a.httpStatusOk){e.next=13;break}return I("logoutAsync: succeeded","auth","info"),e.next=11,ht(t,"","",p.a.loginStatusLoggedOut,!1);case 11:e.next=16;break;case 13:return I("logoutAsync: failed","auth","info"),e.next=16,ht(t,"","",p.a.loginStatusLoggedOut,!1);case 16:return I("<<<logoutAsync","auth","info"),e.abrupt("return",{data:a,status:r});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t,n,a,o,r){return ft.apply(this,arguments)}function ft(){return(ft=Object(r.a)(o.a.mark((function e(t,n,a,r,i,l){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=void 0===l||l,I(">>>handleCompletion: userName="+t+", authToken = "+a+", loginStatus = "+r+", isAdmin = "+i,"auth"),H.setAuthTokenHeader(a),k.send(p.a.ipcLoginStatus,{userName:t,password:n,authToken:a,loginStatus:r,isAdmin:i,onUserCommand:s}),I("handleCompletion after sending credentials","auth","verbose"),et.set("userName",t),r===p.a.loginStatusLoggedIn&&a&&""!==a?et.set("password",Object(Ke.c)(n)):et.set("password",""),I("<<<handleCompletion","auth","info");case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return(gt=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(">>>reLoginAsync","auth","info"),I("reLoginAsync: userName="+(t=et.get("userName")),"auth","info"),n=!1,null==t){e.next=11;break}if(null==(a=et.get("password"))){e.next=11;break}return r=Object(Ke.a)(a),n=!0,e.next=11,ct(t,r);case 11:if(n){e.next=14;break}return e.next=14,ht(t,"","",p.a.loginStatusLoginFailed,!1,!1);case 14:I("<<<reLoginAsync","auth","info");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt={init:function(e){return nt.apply(this,arguments)},final:function(){},login:function(){return lt.apply(this,arguments)},loginRequest:function(e){return st.apply(this,arguments)},logoutRequest:function(e){return ut.apply(this,arguments)},reLoginAsync:function(){return gt.apply(this,arguments)}},vt=null,kt=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleKeyPress=function(e,t){console.log("---handleKeyPress: key = "+e.key+", title = "+t)},console.log("LoginWindow.constructor"),a.state={count:0},vt=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("LoginWindow.componentDidMount"),this.doRender()}},{key:"componentWillUnmount",value:function(){console.log("LoginWindow.componentWillUnmount"),vt=null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getUserName",value:function(){return n.userName}},{key:"getPassword",value:function(){return n.password}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"getSubmitButtonEnabled",value:function(){return n.buttonsEnabled&&(n.isLoggedIn||n.userName.length>=5&&n.password.length>=5)}},{key:"handleInfoPopupClick",value:function(){console.log("LoginWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,n.buttonsEnabled=!0,this.doRender()}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;switch(console.log("LoginWindow.handleChange: "+t+" = "+a),t){case"userName":n.userName=a;break;case"password":n.password=a}this.doRender()}},{key:"handleSubmitClick",value:function(e,t){console.log("LoginWindow.handleSubmitClick: title = "+t),n.buttonsEnabled=!1,n.title=t,this.doRender(),n.isLoggedIn?function(e){yt.apply(this,arguments)}({userName:n.userName,authToken:n.authToken}):function(e){wt.apply(this,arguments)}({userName:n.userName,password:n.password})}},{key:"render",value:function(){var e=this;console.log("loginWindow render");var t=n.isLoggedIn,a=n.showInfoPopup,o=n.showSpinner,r=n.title;return l.a.createElement("div",null,l.a.createElement(T,null),a&&l.a.createElement(x,{title:r,getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),!t&&l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Log in @ iipzy.com")),t&&l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Log out @ iipzy.com")),o&&l.a.createElement(ne,null),!a&&!t&&l.a.createElement("form",null,l.a.createElement(re,{type:"text",autofocus:!0,disabled:t,name:"userName",value:this.getUserName(),label:"User Name",onChange:function(t){return e.handleChange(t)},error:""}),l.a.createElement(re,{type:"password",autofocus:!1,hidden:t,disabled:t,name:"password",value:this.getPassword(),label:"Password",onChange:function(t){return e.handleChange(t)},error:""}),l.a.createElement("div",null,"\xa0"),l.a.createElement("div",{style:{marginLeft:"45px"}},l.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.getSubmitButtonEnabled(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t,"Log in")}},"Login"))),!a&&t&&l.a.createElement("form",null,l.a.createElement(re,{type:"text",autofocus:!0,disabled:t,name:"userName",value:this.getUserName(),label:"User Name",onChange:function(t){return e.handleChange(t)},error:""}),l.a.createElement("div",null,"\xa0"),l.a.createElement("div",{style:{marginLeft:"45px"}},l.a.createElement(oe.a,{type:"submit",variant:"contained",disabled:!this.getSubmitButtonEnabled(),style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t,"Log out")}},"Logout"))))}}]),n}(l.a.Component);function wt(){return(wt=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kt.showSpinner=!0,vt&&vt.doRender(),e.next=4,bt.loginRequest(t);case 4:n=e.sent,a=n.data,console.log("LoginWindow.loginRequest (response): data = "+JSON.stringify(a,null,2)),a.__hadError__?(kt.infoMessage=a.__hadError__.errorMessage,kt.showInfoPopup=!0):(kt.infoMessage="Successfully logged in",kt.showInfoPopup=!1),kt.buttonsEnabled=!0,kt.showSpinner=!1,vt&&vt.doRender();case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(){return(yt=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return kt.showSpinner=!0,vt&&vt.doRender(),e.next=4,bt.logoutRequest(t);case 4:n=e.sent,a=n.data,console.log("LoginWindow.logoutRequest (response): data = "+JSON.stringify(a,null,2)),a.__hadError__?kt.infoMessage=a.__hadError__.errorMessage:kt.infoMessage="Successfully logged out",kt.password="",kt.showInfoPopup=!0,kt.showSpinner=!1,vt&&vt.doRender();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}kt.authToken="",kt.buttonsEnabled=!0,kt.infoMessage="",kt.isLoggedIn=!1,kt.password="",kt.showInfoPopup=!1,kt.showSpinner=!1,kt.title="",kt.userName="";k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.userName,a=t.authToken,o=t.loginStatus;console.log("LoginWindow.handleLoginStatus: userName="+n+", loginStatus = "+o+", authToken = "+a),kt.userName=n||"",kt.authToken=a,kt.isLoggedIn=o===p.a.loginStatusLoggedIn,vt&&vt.doRender()})),k.on(p.a.ipcUserAddVerified,(function(e,t){kt.userName=t.userName,null!=vt&&vt.doRender()}));var Et=kt,Ct=n(69),St=n.n(Ct),_t=n(167),Pt=n.n(_t),xt=(n(331),null),Nt=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("ClientPicker.constructor"),xt=Object(f.a)(a),a.state={count:0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("ClientPicker.componentDidMount"),At("sentinelsOnly=1");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("ClientPicker.componentWillUnmount"),xt=null}},{key:"getClients",value:function(){return console.log("ClientPicker.getClients"),n.clientsFiltered}},{key:"getDisabled",value:function(){return this.props.getDisabled()}},{key:"getSelectedClient",value:function(){return console.log("clientPicker.getSelectedClient: "+n.selectedClient),n.selectedClient}},{key:"handleSelect",value:function(e){n.selectedClient=e.value,console.log("clientPicker.handleSelect: "+n.selectedClient),this.props.onPick(n.clientTokenByEntryString.get(n.selectedClient))}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){var e=this;return console.log("ClientPicker.render"),l.a.createElement("div",null,l.a.createElement(Pt.a,{disabled:this.getDisabled(),options:this.getClients(),onChange:function(t){return e.handleSelect(t)},value:this.getSelectedClient(),placeholder:"-------------------- Select a client ---------------------"}))}}]),n}(l.a.Component);function At(e){return Tt.apply(this,arguments)}function Tt(){return(Tt=Object(r.a)(o.a.mark((function e(t){var n,a,r,i,l,s,u,c,d,p,m,h;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getClients(t);case 2:if(n=e.sent,a=n.data,r=n.status,console.log("ClientPicker.getClientsFromDB (response): status = "+r),!a.__hadError__){e.next=9;break}return console.log("ClientPicker.handleClientsGetResponse: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),e.abrupt("return");case 9:if(a){for(Nt.clientsFiltered=[],Nt.clientTokenByEntryString=new Map,Nt.entryStringByClientToken=new Map,i=0;i<a.length;i++)l=a[i],s=l.clientName,u=l.clientType,c=l.clientToken,d=l.publicIPAddress,p=l.localIPAddress,m=l.isOnLine,"appliance"===u&&(h=s+"  "+d+"  "+p+(m?"":"  - offline"),Nt.clientsFiltered.push(h),Nt.clientTokenByEntryString.set(h,c),Nt.entryStringByClientToken.set(c,h));Nt.selectedClientToken&&(Nt.selectedClient=Nt.entryStringByClientToken.get(Nt.selectedClientToken))}xt&&(Nt.selectedClientToken=xt.props.getSelectedClientToken()),xt&&xt.doRender();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Nt.clientsFiltered=[],Nt.clientTokenByEntryString=new Map,Nt.entryStringByClientToken=new Map,Nt.selectedClient="",Nt.selectedClientToken="";var Ot=Nt,It="address not set";function Ut(){return(Ut=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("sentinelAdmin.init","sadm","info"),It=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lt(){return(Lt=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I("sentinelAdmin.getSentinelAdminStatus","sadm","verbose"),!t){e.next=5;break}return e.next=4,H.get("https://"+It+"/api/sentineladmin/status?tgtclienttoken="+t);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return(jt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("updater.postSentinelAdmin","updt","info"),delete(n=JSON.parse(JSON.stringify(t))).actionUuid,e.next=5,H.post("https://"+It+"/api/sentineladmin/action",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wt={init:function(e){return Ut.apply(this,arguments)},final:function(){},getSentinelAdminStatus:function(e){return Lt.apply(this,arguments)},postSentinelAdmin:function(e){return jt.apply(this,arguments)}},Rt=null,Mt=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),Rt=Object(f.a)(a),a.state={count:0},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("SentinelAdminWindow componentDidMount"),this.getSentinelAdminSettings();try{n.statusInterval=setInterval(Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.inSendSentinelAdminStatusGetRequest){t.next=5;break}return e.inSendSentinelAdminStatusGetRequest=!0,t.next=4,Dt();case 4:e.inSendSentinelAdminStatusGetRequest=!1;case 5:case"end":return t.stop()}}),t)}))),1e3)}catch(t){console.log("(Exception) "+t)}}},{key:"componentWillUnmount",value:function(){console.log("SentinelAdminWindow componentWillUnmount"),clearInterval(n.statusInterval),n.statusInterval=null,Rt=null}},{key:"getSentinelAdminSettings",value:function(){var e=et.get("sentinelAdminSettings");if(e){var t=e.tgtClientToken,a=e.action;t&&(n.tgtClientToken=t),a&&(n.action=a)}}},{key:"handleSaveClick",value:function(e){console.log("...SentinelAdminWindow handleSaveClick"),et.set("sentinelAdminSettings",{tgtClientToken:n.tgtClientToken,action:n.action})}},{key:"handleSubmitClick",value:function(e){var t=this;console.log("...SentinelAdminWindow handleSubmitClick"),n.submitTimeout=setTimeout((function(){n.submitTimeout&&(n.waitForInProgress=!1,n.status="timed out",t.doRender())}),3e4),n.waitForInProgress=!0,n.status="contacting server...",this.doRender(),function(e){Ft.apply(this,arguments)}({tgtClientToken:n.tgtClientToken,action:n.action,actionUuid:St()()})}},{key:"handleActionChange",value:function(e){console.log("...SentinelAdminWindow handleActionChange: "+e.target.value),n.action=e.target.value,this.doRender()}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getClientToken",value:function(){return n.tgtClientToken}},{key:"getDisabled",value:function(){return n.waitForInProgress||n.inProgress}},{key:"getEnableSave",value:function(){return!0}},{key:"getEnableSubmit",value:function(){return!(n.tgtClientToken.length<16)&&(n.inProgress&&(n.waitForInProgress=!1,n.submitTimeout&&(clearTimeout(n.submitTimeout),n.submitTimeout=null)),!n.waitForInProgress&&!n.inProgress)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"handleClientPick",value:function(e){console.log("SentinelAdminWindow.handleClientPick: "+e),n.tgtClientToken=e}},{key:"handleInfoPopupClick",value:function(){console.log("SentinelAdminWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,this.doRender()}},{key:"render",value:function(){var e=this;console.log("SentinelAdminWindow render");var t=n.action,a=n.waitForInProgress||n.inProgress,o=n.status,r=a,i=n.showInfoPopup;return l.a.createElement("div",null,l.a.createElement(T,null),r&&l.a.createElement(ne,null),i&&l.a.createElement(x,{title:"Sentinel Admin",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),!i&&l.a.createElement("div",null,l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Sentinel Administration")),l.a.createElement("div",{style:{marginLeft:"20px"}},l.a.createElement("table",{align:"left"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"Client:"),l.a.createElement("td",null,l.a.createElement(Ot,{onPick:function(t){return e.handleClientPick(t)},getDisabled:this.getDisabled,getSelectedClientToken:this.getClientToken}))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"Action:\xa0\xa0\xa0\xa0\xa0\xa0"),l.a.createElement("table",{align:"left"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartSentinel,checked:t===p.a.adminCmd_sentinel_restartSentinel,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Sentinel\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartSentinelAdmin,checked:t===p.a.adminCmd_sentinel_restartSentinelAdmin,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Sentinel Admin\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartSentinelWeb,checked:t===p.a.adminCmd_sentinel_restartSentinelWeb,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Sentinel Web\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_restartUpdater,checked:t===p.a.adminCmd_sentinel_restartUpdater,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Restart Updater\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_reboot,checked:t===p.a.adminCmd_sentinel_reboot,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Reboot\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_sendLogs,checked:t===p.a.adminCmd_sentinel_sendLogs,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Send Logs"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_setLogLevelDetailed,checked:t===p.a.adminCmd_sentinel_setLogLevelDetailed,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Set Log Level = Detailed"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"action",value:p.a.adminCmd_sentinel_setLogLevelNormal,checked:t===p.a.adminCmd_sentinel_setLogLevelNormal,disabled:a,onChange:function(t){return e.handleActionChange(t)}}),"\xa0Set Log Level = Normal")))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0"),l.a.createElement("td",null,l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSave(),style:{marginLeft:"100px",width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSaveClick(t)}},"Save"),l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSubmit(),style:{marginLeft:"50px",width:"130px",color:"#0000b0"},onClick:function(t){return e.handleSubmitClick(t)}},"Submit"))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("hr",{width:"1000%",height:"20",border:"none"}))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"Status:"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"activity-status-text",size:"40",value:o,readOnly:!0}))))))))}}]),n}(l.a.Component);function Dt(){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt.getSentinelAdminStatus(Mt.tgtClientToken);case 2:t=e.sent,n=t.data,(a=t.status)&&a===p.a.httpStatusOk&&(r=n.adminStatus,console.log("SentinelAdminWindow.getSentinelAdminStatus: status = "+JSON.stringify(r,null,2)),Mt.inProgress=r.inProgress,Mt.waitForInProgress||(Mt.status=r.step),r.failed&&(Mt.status="failed",Mt.waitForInProgress=!1,Mt.submitTimeout&&(clearTimeout(Mt.submitTimeout),Mt.submitTimeout=null))),Rt&&Rt.doRender();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(){return(Ft=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wt.postSentinelAdmin(t);case 2:n=e.sent,a=n.data,n.status,console.log("SentinelAdminWindow.postSentinelAdmin: response = "+JSON.stringify(a,null,2)),a.__hadError__&&(console.log("SentinelAdminWindow.postSentinelAdmin: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),Mt.infoMessage=a.__hadError__.errorMessage,Mt.showInfoPopup=!0,Mt.buttonsEnabled=!1,Mt.status="failed",Mt.waitForInProgress=!1,Mt.inProgress=!1,Mt.submitTimeout&&(clearTimeout(Mt.submitTimeout),Mt.submitTimeout=null)),Rt&&Rt.doRender();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Mt.action=p.a.adminCmd_sentinel_none,Mt.infoMessage="",Mt.inProgress=!1,Mt.showInfoPopup=!1,Mt.status="done",Mt.statusInterval=null,Mt.submitTimeout=null,Mt.tgtClientToken="",Mt.waitForInProgress=!1;var zt=Mt,Vt=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(m.a)(this,n),t.call(this,e)}return Object(h.a)(n,[{key:"render",value:function(){var e=this,t=this.props.clients;return console.log("SentinelTable render"),console.log(t),l.a.createElement("table",{id:"sentinel-table"},t&&t.map((function(t){return l.a.createElement("tr",{key:t.clientToken},l.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},l.a.createElement("div",{style:{textAlign:"left",marginLeft:20}},t.clientName)),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.localIPAddress),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.isOnLine?"":"off line"),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:t.userId?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.userId?"":"not registered"),l.a.createElement("td",null,"\xa0\xa0\xa0\xa0"),l.a.createElement("td",{style:{cursor:t.isOnLine?"pointer":"default"},onClick:function(){return e.props.onClick(t)}},t.isWiFi?"wifi":""))})))}}]),n}(l.a.Component),Ht=null,qt=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("SentinelsWindow.constructor"),a.state={count:0},Ht=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("SentinelsWindow.componentDidMount"),function(e){Gt.apply(this,arguments)}("localSentinelsOnly=1")}},{key:"componentWillUnmount",value:function(){console.log("SentinelsWindow.componentWillUnmount"),Ht=null}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"handleLocalIPAddressClick",value:function(e){if(console.log("SentinelsWindow.clientTokenClick = "+e.localIPAddress+", isOnLine = "+e.isOnLine+", isLocalClient = "+e.isLocalClient+", clientToken = "+e.clientToken+", clientName = "+e.clientName),e.isOnLine){var t={userName:et.get("userName"),password:et.get("password"),clientName:e.clientName,from:window.location.origin},n=Ke.b.encrypt(JSON.stringify(t));e.isLocalClient?window.location.replace("http://"+e.localIPAddress+":"+p.a.port_sentinel_web+"?params="+encodeURI(n)+"&clientToken="+e.clientToken+"&isLocalClient=true"):window.location.replace("https://iipzy.net:"+p.a.port_sentinel_web+"?params="+encodeURI(n)+"&clientToken="+e.clientToken+"&isLocalClient=false")}}},{key:"handleLoginClick",value:function(e){console.log("SentinelsWindow.handleLoginClick"),k.send(p.a.ipcLinkTo,p.a.urlLogin)}},{key:"render",value:function(){var e=this;console.log("SentinelsWindow.render");var t=n.clients,a=n.isLoggedIn,o=t?t.length:0;return!t&&a||1===o?l.a.createElement("div",null):l.a.createElement("div",null,l.a.createElement(T,null),l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Sentinel")),!a&&l.a.createElement("div",null,l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"You must be logged in to connect to your iipzy Sentinel"),l.a.createElement(oe.a,{type:"button",variant:"contained",style:{width:"130px",color:"#0000b0"},onClick:function(t){return e.handleLoginClick(t)}},"Login"))),a&&o>1&&l.a.createElement("div",{align:"center",style:{width:"600px",height:"120px",font:"14px Courier New",fontWeight:"bold"}},l.a.createElement(Vt,{clients:t,onClick:function(t){return e.handleLocalIPAddressClick(t)}})),a&&0===o&&l.a.createElement("div",null,l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Your network does not have an iipzy Sentinel"))))}}]),n}(l.a.Component);function Gt(){return(Gt=Object(r.a)(o.a.mark((function e(t){var n,a,r,i,l,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.getClients(t);case 2:if(n=e.sent,a=n.data,r=n.status,console.log("SentinelsWindow.getClientsFromDB (response): status = "+r),!a.__hadError__){e.next=11;break}return console.log("SentinelsWindow.getClientsFromDB: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),qt.infoMessage=a.__hadError__.errorMessage,Ht&&Ht.doRender(),e.abrupt("return");case 11:if(qt.clients=a,1===qt.clients.length)null!=Ht&&(i={clientName:qt.clients[0].clientName,clientToken:qt.clients[0].clientToken,isOnLine:qt.clients[0].isOnLine,isLocalClient:qt.clients[0].isLocalClient,localIPAddress:qt.clients[0].localIPAddress},Ht.handleLocalIPAddressClick(i));else{for(qt.clientByClientToken=new Map,l=0;l<qt.clients.length;l++)s=qt.clients[l],qt.clientByClientToken.set(s.clientToken,s);Ht&&Ht.doRender()}case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}qt.clients=null,qt.clientByClientToken=new Map,qt.clientToken="",qt.infoMessage="",qt.isLoggedIn=!1;k.on(p.a.ipcLoginStatus,(function(e,t){var n=t.userName,a=(t.authToken,t.password,t.loginStatus);console.log("SentinelsWindow.handleLoginStatus: userName = "+n+", loginStatus = "+a),qt.isLoggedIn=a===p.a.loginStatusLoggedIn}));var Jt=qt,Xt="address not set";function Yt(){return(Yt=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I("updater.init","updt","info"),Xt=t;case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(){return(Zt=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I("getUpdaterStatus: tgtClientToken = "+t,"updt","verbose"),!t){e.next=5;break}return e.next=4,H.get("https://"+Xt+"/api/updater/status?tgtclienttoken="+t);case 4:return e.abrupt("return",e.sent);case 5:return e.abrupt("return",{});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(){return(Kt=Object(r.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I("updater.postUpdaterUpdate","updt","info"),delete(n=JSON.parse(JSON.stringify(t))).updateUuid,e.next=5,H.post("https://"+Xt+"/api/updater/update",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qt={init:function(e){return Yt.apply(this,arguments)},final:function(){},getUpdaterStatus:function(e){return Zt.apply(this,arguments)},postUpdaterUpdate:function(e){return Kt.apply(this,arguments)}},$t=null,en=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),a=t.call(this,e),console.log("UpdaterWindow.constructor"),$t=Object(f.a)(a),a.state={count:0},a.inSendUpdaterStatusGetRequest=!1,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;console.log("UpdaterWindow.componentDidMount"),this.getUpdaterSettings();try{n.statusInterval=setInterval(Object(r.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.inSendUpdaterStatusGetRequest){t.next=5;break}return e.inSendUpdaterStatusGetRequest=!0,t.next=4,tn();case 4:e.inSendUpdaterStatusGetRequest=!1;case 5:case"end":return t.stop()}}),t)}))),1e3)}catch(t){console.log("(Exception) "+t)}}},{key:"componentWillUnmount",value:function(){console.log("UpdaterWindow.componentWillUnmount"),clearInterval(n.statusInterval),n.statusInterval=null,$t=null}},{key:"handleSaveClick",value:function(e){console.log("...UpdaterWindow handleSaveClick"),et.set("updaterSettings",{tgtClientToken:n.tgtClientToken,updateType:n.updateType})}},{key:"handleSubmitClick",value:function(e){var t=this;console.log("...UpdaterWindow handleSubmitClick"),n.submitTimeout=setTimeout((function(){n.submitTimeout&&(n.waitForInProgress=!1,n.status="timed out",t.doRender())}),3e4),n.waitForInProgress=!0,n.status="contacting server...",this.doRender(),et.set("updaterSettings",{tgtClientToken:n.tgtClientToken,updateType:n.updateType}),function(e){an.apply(this,arguments)}({tgtClientToken:n.tgtClientToken,updateType:n.updateType,updateUuid:St()()})}},{key:"getUpdaterSettings",value:function(){var e=et.get("updaterSettings");if(e){var t=e.tgtClientToken,a=e.updateType;t&&(n.tgtClientToken=t),a&&(n.updateType=a),null!=$t&&$t.doRender()}}},{key:"handleUpdateTypeChange",value:function(e){console.log("...UpdaterWindow handleUpdateTypeChange: "+e.target.value),n.updateType=e.target.value,this.doRender()}},{key:"doRender",value:function(){var e=this.state.count+1;this.setState({count:e})}},{key:"getClientToken",value:function(){return n.tgtClientToken}},{key:"getDisabled",value:function(){return n.waitForInProgress||n.inProgress}},{key:"getEnableSave",value:function(){return!0}},{key:"getEnableSubmit",value:function(){return!(n.tgtClientToken.length<16)&&(n.inProgress&&(n.waitForInProgress=!1,n.submitTimeout&&(clearTimeout(n.submitTimeout),n.submitTimeout=null)),!n.waitForInProgress&&!n.inProgress)}},{key:"getInfoMessage",value:function(){return n.infoMessage}},{key:"getDisableRemoteTCPassword",value:function(){return!1}},{key:"getRemoteTCPassword",value:function(){return n.password}},{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value;switch(console.log("updateWindow.name="+t+", value="+this.state[t]),t){case"password":n.password=a}this.setState(Object(ae.a)({},t,a))}},{key:"handleClientPick",value:function(e){console.log("UpdaterWindow.handleClientPick: "+e),n.tgtClientToken=e}},{key:"handleInfoPopupClick",value:function(e){console.log("UpdaterWindow.handleInfoPopupClick")}},{key:"hideInfoPopup",value:function(){n.showInfoPopup=!1,this.doRender()}},{key:"render",value:function(){var e=this;console.log("UpdaterWindow render");var t=n.updateType,a=n.waitForInProgress||n.inProgress,o=n.status,r=a,i=n.showInfoPopup;return l.a.createElement("div",null,l.a.createElement(T,null),r&&l.a.createElement(ne,null),i&&l.a.createElement(x,{title:"Sentinel Update",getInfoMessage:function(){return e.getInfoMessage()},onSubmit:function(t){return e.handleInfoPopupClick(t)},closePopup:this.hideInfoPopup.bind(this)}),!i&&l.a.createElement("div",null,l.a.createElement("div",{style:{marginLeft:20,textAlign:"left"}},l.a.createElement("p",{style:{fontSize:"140%"}},"Update Sentinel")),l.a.createElement("div",{style:{marginLeft:"20px"}},l.a.createElement("table",{align:"left"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"Client:"),l.a.createElement("td",null,l.a.createElement(Ot,{onPick:function(t){return e.handleClientPick(t)},getDisabled:this.getDisabled,getSelectedClientToken:this.getClientToken}))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"Update Type:\xa0"),l.a.createElement("table",{align:"left"},l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-core",checked:"iipzy-core"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Core\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-sentinel-admin",checked:"iipzy-sentinel-admin"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Admin\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-sentinel-web",checked:"iipzy-sentinel-web"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Web\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-sentinel-web-proxy",checked:"iipzy-sentinel-web-proxy"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Web Proxy\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-sentinel-traffic-control",checked:"iipzy-sentinel-traffic-control"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Traffic Control\xa0"),l.a.createElement("tr",null,l.a.createElement("input",{type:"radio",name:"update-type",value:"iipzy-updater",checked:"iipzy-updater"===t,disabled:a,onChange:function(t){return e.handleUpdateTypeChange(t)}}),"\xa0Updater")))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0"),l.a.createElement("td",null,l.a.createElement(oe.a,{type:"button",variant:"contained",disabled:!this.getEnableSubmit(),style:{marginLeft:"50px",width:"130px",color:"#0000b0"},autoFocus:!0,onClick:function(t){return e.handleSubmitClick(t)}},"Submit"))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("hr",{width:"770%",height:"20",border:"none"}))),l.a.createElement("tr",null,l.a.createElement("td",null,"\xa0")),l.a.createElement("tr",null,l.a.createElement("td",null,"Status:"),l.a.createElement("td",null,l.a.createElement("input",{type:"text",name:"update-status-text",size:"40",value:o,readOnly:!0}))))))))}}]),n}(l.a.Component);function tn(){return nn.apply(this,arguments)}function nn(){return(nn=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt.getUpdaterStatus(en.tgtClientToken);case 2:t=e.sent,n=t.data,(a=t.status)&&a===p.a.httpStatusOk&&(r=n.updateStatus,console.log("UpdaterWindow.getUpdaterStatus: status = "+JSON.stringify(r,null,2)),en.inProgress=r.inProgress,en.waitForInProgress||(en.status=r.step),r.failed&&(en.status="failed",en.waitForInProgress=!1,en.submitTimeout&&(clearTimeout(en.submitTimeout),en.submitTimeout=null))),$t&&$t.doRender();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function an(){return(an=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qt.postUpdaterUpdate(t);case 2:n=e.sent,a=n.data,n.status,console.log("UpdaterWindow.postUpdaterUpdate: response = "+JSON.stringify(a,null,2)),a.__hadError__&&(console.log("UpdaterWindow.postUpdaterUpdate: errorMessage = "+a.__hadError__.errorMessage+", statusCode = "+a.__hadError__.statusCode),en.infoMessage=a.__hadError__.errorMessage,en.showInfoPopup=!0,en.buttonsEnabled=!1,en.status="failed",en.waitForInProgress=!1,en.inProgress=!1,en.submitTimeout&&(clearTimeout(en.submitTimeout),en.submitTimeout=null)),$t&&$t.doRender();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}en.infoMessage="",en.inProgress=!1,en.password="",en.showInfoPopup=!1,en.submitTimeout=null,en.status="done",en.statusInterval=null,en.tgtClientToken="",en.updateType="iipzy-core",en.waitForInProgress=!1;var on=en,rn=null,ln=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).callBackendAPI=Object(r.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/express_backend");case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,200===t.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)}))),console.log("App.constructor"),a.state={count:0,data:null},rn=Object(f.a)(a),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){console.log("App.componentDidMount")}},{key:"doRender",value:function(){console.log("App.doRender");var e=this.state.count+1;this.setState({count:e})}},{key:"render",value:function(){n.loggedIn,n.navbarName;return l.a.createElement(l.a.Fragment,null,l.a.createElement(c.a,null,l.a.createElement(E,null),l.a.createElement(v.d,null,l.a.createElement(v.b,{path:p.a.urlAbout,exact:!0,component:O}),l.a.createElement(v.b,{path:p.a.urlAddUser,exact:!0,component:ge}),l.a.createElement(v.b,{path:p.a.urlAdministration,exact:!0,component:be}),l.a.createElement(v.b,{path:p.a.urlBlank,exact:!0,component:ve}),l.a.createElement(v.b,{path:p.a.urlClients,exact:!0,component:Oe}),l.a.createElement(v.b,{path:p.a.urlDownload,exact:!0,component:Ie}),l.a.createElement(v.b,{path:p.a.urlEditUser,exact:!0,component:Ve}),l.a.createElement(v.b,{path:p.a.urlForgotPassword,exact:!0,component:Xe}),l.a.createElement(v.b,{path:p.a.urlHome,exact:!0,component:Ye}),l.a.createElement(v.b,{path:p.a.urlIipzy,exact:!0,component:Ze}),l.a.createElement(v.b,{path:p.a.urlLogin,exact:!0,component:Et}),l.a.createElement(v.b,{path:p.a.urlSentinelAdmin,exact:!0,component:zt}),l.a.createElement(v.b,{path:p.a.urlSentinels,exact:!0,component:Jt}),l.a.createElement(v.b,{path:p.a.urlUpdater,exact:!0,component:on}),l.a.createElement(v.a,{to:p.a.urlBlank}),"}")))}}]),n}(i.Component);ln.loggedIn=!1,ln.navbarName="home",ln.props=null;k.on(p.a.ipcLoginStatus,(function(e,t){console.log("App.handleLoginStatus");var n=t.loginStatus;t.onUserCommand;ln.loggedIn=n===p.a.loginStatusLoggedIn,"home"===ln.navbarName&&(ln.loggedIn?k.send(p.a.ipcLinkTo,p.a.urlIipzy):k.send(p.a.ipcLinkTo,p.a.urlLogin))})),k.on(p.a.ipcShowNavBar,(function(e,t){console.log("App.handleShowNavBar: "+t),ln.navbarName=t,"admin"===ln.navbarName&&k.send(p.a.ipcLinkTo,p.a.urlClients),null!=rn&&rn.doRender()}));var sn=ln;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function un(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}var cn="address not set",dn=null,pn=0,mn=!1,hn=0;function fn(){return(fn=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(">>>heartbeat.init","htbt","info"),cn=t,I("..clientToken="+(dn=et.get("clientToken")),"htbt","info"),dn&&H.setClientTokenHeader(dn),setInterval(Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(hn){e.next=11;break}return hn++,e.prev=2,e.next=5,kn();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),I("(Exception) heartbeat: "+e.t0,"htbt","error");case 10:hn--;case 11:case"end":return e.stop()}}),e,null,[[2,7]])}))),2e4),hn++,e.next=9,kn();case 9:hn--,I("<<<heartbeat.init","htbt","info");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gn(){var e=et.get("pseudoLocalIPAddress");if(!e){Date.now().toString();e=Math.floor(255*Math.random())+1+"."+(Math.floor(255*Math.random())+0)+"."+(Math.floor(255*Math.random())+0)+"."+(Math.floor(255*Math.random())+0)}return et.set("pseudoLocalIPAddress",e),e}function bn(){return vn.apply(this,arguments)}function vn(){return(vn=Object(r.a)(o.a.mark((function e(){var t,n,a,r,i,l,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.get("https://"+cn+"/api/myIPAddress");case 2:if(t=e.sent,n=t.data,t.status!==p.a.httpStatusOk){e.next=15;break}return a=n.yourIPAddress,r=n.timestamp,i=gn(),I("heartbeat.createClient: newClientToken = "+(l=encodeURI(a+":"+i+":"+r)),"htbt","info"),e.next=12,H.post("https://"+cn+"/api/client/client",{localIPAddress:i,clientType:"web",clientToken:l,clientName:"web client"});case 12:s=e.sent,s.status===p.a.httpStatusOk&&(I("heartbeat.createClient: clientToken = "+(dn=l),"htbt","info"),et.set("clientToken",dn),H.setClientTokenHeader(dn));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kn(){return wn.apply(this,arguments)}function wn(){return(wn=Object(r.a)(o.a.mark((function e(){var t,n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(">>>heartbeat: isLoggedIn ="+mn+", isExiting = "+!1,"htbt","info"),e.next=4;break;case 4:if(dn){e.next=10;break}return e.next=7,bn();case 7:if(dn){e.next=10;break}return I("<<<heartbeat: no clientToken","htbt","info"),e.abrupt("return");case 10:return t={},I("heartbeat: before post - reqData = "+JSON.stringify(t,null,2),"htbt","info"),e.next=14,H.post("https://"+cn+"/api/client/heartbeat",t);case 14:n=e.sent,a=n.data,I("heartbeat: status = "+(r=n.status),"htbt","verbose"),r!==p.a.httpStatusOk&&r===p.a.httpStatusUnauthorized&&(et.set("clientToken",null),dn=null),a&&(I("heartbeat: data = "+JSON.stringify(a,null,2),"htbt","verbose"),a.clientToken,(mn=a.isLoggedIn)?pn=0:0===pn?(I("heartbeat: login needed","htbt","info"),k.send(p.a.ipcClientLoginNeeded,!0),pn=5):pn--),I("<<<heartbeat","htbt","info");case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}k.on(p.a.ipcLoginStatus,(function(e,t){I("heartbeat handleLoginStatus: status = "+t.loginStatus,"htbt","info"),mn=t.loginStatus===p.a.loginStatusLoggedIn,H.setAuthTokenHeader(t.authToken)}));var yn={init:function(e){return fn.apply(this,arguments)}};function En(){return(En=Object(r.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.a.render(l.a.createElement(c.a,null,l.a.createElement(sn,null)),document.getElementById("root")),e.next=3,yn.init("iipzy.net:8001");case 3:return e.next=5,bt.init("iipzy.net:8001");case 5:return t=e.sent,console.log("====== AFTER calling auth.init"),t?bt.login():(console.log("===========!hasCredentials"),k.send(p.a.ipcLinkTo,p.a.urlLogin)),console.log("====== AFTER calling auth.login"),e.next=11,Ee.init("iipzy.net:8001");case 11:return console.log("====== AFTER calling clients.init"),e.next=14,Wt.init("iipzy.net:8001");case 14:return console.log("====== AFTER calling updater.init"),e.next=17,Qt.init("iipzy.net:8001");case 17:return console.log("====== AFTER calling updater.init"),e.next=20,ee.init("iipzy.net:8001");case 20:console.log("====== AFTER calling user.init"),un();case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){En.apply(this,arguments)}()},51:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(62),o="bite-the-wax-tadpole-hank-jake$$";function r(t){var n=e.from(Object(a.randomBytes)(16)),r=Object(a.createCipheriv)("aes-256-ctr",o,n),i=r.update(t,"utf8","hex");return i+=r.final("hex"),"".concat(n.toString("hex"),":").concat(i.toString())}function i(t){if(!t||""===t)return"";var n=t.split(":"),r=e.from(n.shift(),"hex"),i=e.from(n.join(":"),"hex"),l=Object(a.createDecipheriv)("aes-256-ctr",o,r),s=l.update(i,"hex","utf8");return(s+=l.final("utf8")).toString()}t.b={encrypt:r,decrypt:i}}).call(this,n(12).Buffer)}},[[170,1,2]]]);
//# sourceMappingURL=main.6865ebbf.chunk.js.map